---
title: "JavaScript ã§äººã¨åŒã˜ã‚ˆã†ã«æ–‡å­—æ•°ã‚’æ•°ãˆã‚‹"
emoji: "â›³"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["javascript"]
published: false
---

## ğŸŒ¼ ã¯ã˜ã‚ã«

äººã¯ã“ã®ã‚ˆã†ã«æ–‡å­—æ•°ã‚’æ•°ãˆã¾ã™

```javascript
"A" // 1æ–‡å­—
"ğŸ˜†" // 1æ–‡å­—
"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦" // 1æ–‡å­—
```

ã—ã‹ã—ã€JavaScript ã«æ–‡å­—æ•°ã‚’è¨ˆç®—ã•ã›ãŸã‚‰ã“ã†ã„ã†çµæœã«ãªã‚Šã¾ã™ã€‚

```javascript
console.log("A".length) // 1
console.log("ğŸ˜†".length) // 2
console.log("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦".length) // 11
```

ãªãœã“ã†ãªã‚‹ã®ã‹ã€ã©ã†ã‚„ã£ãŸã‚‰ JavaScript ã«ã‚‚äººé–“ã¨åŒã˜æ„Ÿè¦šã§æ–‡å­—ã‚’æ•°ãˆã•ã›ã‚‹ã®ã‹ã€ä»Šå›ã¯ãã‚Œã«ã¤ã„ã¦è©±ã—ã¾ã™ï¼ï¼ï¼

## 1. æ–‡å­—é›†åˆã¨ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

ã¾ãšå¤§å‰æã¨ã—ã¦äººã¨ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ãŒæ‰±ã†æ–‡å­—ã¯é•ã„ã¾ã™ã€‚äººã¯æ—¥æœ¬èªã¨ã‹è‹±èªã¨ã‹ã®è‡ªç„¶è¨€èªã®æ–‡å­—ã‚’æ‰±ã„ã¾ã™ãŒã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ãŒç›´æ¥æ‰±ãˆã‚‹ã®ã¯0/1ã®æ•°å­—ã ã‘ã§ã™ã€‚

ãã®ãŸã‚ã€äººé–“ãŒä½¿ã†æ–‡å­—ã‚’ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«å‡¦ç†ã•ã›ã‚‹ã«ã¯ã€æ–‡å­—ã‚’0/1ã«å¤‰æ›ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚

ã“ã®å¤‰æ›ã®æµã‚Œã¯ã–ã£ãã‚Š ã€Œâ‘ æ–‡å­—ã”ã¨ã«ç•ªå·ã‚’æŒ¯ã‚‹ã€ â†’ ã€Œâ‘¡ãã®ç•ªå·ã‚’ 0/1 ã«å¤‰æ›ã™ã‚‹ã€ ã§è¡Œã‚ã‚Œã¾ã™ã€‚

### 1-1. æ–‡å­—é›†åˆ

ã€Œâ‘ æ–‡å­—ã”ã¨ã«ç•ªå·ã‚’æŒ¯ã‚‹ã€ ã“ã¨ã§ä½œã‚‰ã‚ŒãŸã‚‚ã®ãŒæ–‡å­—é›†åˆã§ã™ã€‚æ–‡å­—é›†åˆã«ã‚‚è‰²ã€…ç¨®é¡ãŒã‚ã‚Šã¾ã™ãŒç¾ä»£ã ã¨ Unicode ãŒåºƒãä½¿ã‚ã‚Œã¦ãŠã‚Šã€JavaScript ã‚‚ Unicode ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

| æ–‡å­— | Unicode  |
|----|----------| 
| ã‚  | `U+3042` |

æ—¥æœ¬èªæ–‡å­— ã€Œã‚ã€ ã«æŒ¯ã‚‰ã‚ŒãŸç•ªå·ã¯ ã€ŒU+3042ã€ ã ã‚ˆã€ã¨ã„ã†ç´„æŸãŒ Unicode ã§ã™ã€‚

ã¾ãŸã€`U+3042` ã®ã‚ˆã†ã« Unicode ã§æŒ¯ã£ãŸç•ªå·ã®ã“ã¨ã¯ **Code Point**ï¼ˆç¬¦å·ä½ç½®ï¼‰ã¨è¨€ã„ã¾ã™ã€‚

### 1-2. ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

ã§ã¯æ–‡å­—ã”ã¨ã«ç•ªå·ãŒæŒ¯ã‚‰ã‚ŒãŸã®ã§ã€ã€Œâ‘¡ãã®ç•ªå·ã‚’ 0/1 ã«å¤‰æ›ã™ã‚‹ã€ å¿…è¦ãŒã‚ã‚Šã€ãã‚Œã‚’**ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**ã¨è¨€ã„ã¾ã™ã€‚

Unicode ç•ªå·ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ–¹å¼ã«ã¯ UTF-8ã€UTF-16ã€UTF-32 ãªã©ã„ãã¤ã‹ç¨®é¡ãŒã‚ã‚Šã¾ã™ã€‚

UTF ã¯ **Unicode Transformation Format** ã®ç•¥ãªã®ã§å…±é€šã§ã€ãã®å¾Œã«ã¤ãæ•°å­—ã¯ **1 Code Unit ã®ã‚µã‚¤ã‚º**ã‚’è¡¨ã—ã¾ã™ã€‚

ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çµæœã‚’è¡¨ã™ã¨ãã¯å›ºå®šå¹…ã®ã‚³ãƒã‚’1å€‹ä»¥ä¸Šä½¿ã„ã¾ã™ãŒã€ãã®ã€Œå›ºå®šå¹…ã®ã‚³ãƒã€ã‚’ **Code Unit** ã¨è¨€ã„ã¾ã™ã€‚ ä¾‹ãˆã° UTF-16 ã§ã¯ 1 Code Unit ã®ã‚µã‚¤ã‚ºãŒ16bitã¨ã„ã†æ„å‘³ã§ã€1å€‹(ã¾ãŸã¯2å€‹)ã® Code Unit ã§ Code Point ã‚’è¡¨ç¾ã—ã¾ã™ã€‚

*ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ–¹å¼ã”ã¨ã®ä¾‹*

| æ–‡å­— | Code Point | ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ–¹å¼ | Code Unit æ§‹æˆ | Code unit å€¤ï¼ˆHEXï¼‰ |
|----|------------|------------|--------------|------------------| 
| ã‚  | `U+3042`   | UTF-8      | 3 å€‹ï¼ˆå„8bitï¼‰   | `0xE3 0x81 0x82` |
| ã‚  | `U+3042`   | UTF-16     | 1 å€‹ï¼ˆ16bitï¼‰   | `0x3042`         |
| ã‚  | `U+3042`   | UTF-32     | 1 å€‹ï¼ˆ32bitï¼‰   | `0x00003042`     |


JavaScript ã®å†…éƒ¨ã§æ–‡å­—åˆ—ã‚’æ‰±ã†éš›ã¯ UTF-16 ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‹ã‚‰ã¯ UTF-16 ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’å‰æã«è©±ã‚’é€²ã‚ã¾ã™ã€‚

## 2. ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã¨ JavaScript

Unicode ã¯ç¾ä»£ã§ä½¿ã‚ã‚Œã‚‹æ–‡å­—ä½“ç³»ã»ã¨ã‚“ã©ã«å¯¾å¿œã—ã¦ã„ã¦ã€`U+0000` ã‹ã‚‰ `U+FFFF` ã¾ã§ã®ç´„65,536ã® Code Point ã«ã‚ˆãä½¿ã†åŸºæœ¬çš„ãªæ–‡å­—ãƒ»è¨˜å·ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ ã“ã®ç¯„å›²ã‚’ **BMP** (Basic Multilingual Plane, **åŸºæœ¬å¤šè¨€èªé¢**)ã¨è¨€ã„ã¾ã™ã€‚

BMP ã¯å¤šãã®æ–‡å­—ãŒ **1 Code Point ã‚’ 1 Code Unit ã§è¡¨ç¾**ã§ãã¾ã™ã€‚

| æ–‡å­— | Code Point | UTF-16 Code Unitï¼ˆHEXï¼‰  |
|----|------------|------------------------|
| A  | `U+0041`   | `0x0041` ï¼ˆ1 Code Unitï¼‰ |
| ã‚  | `U+3042`   | `0x3042` ï¼ˆ1 Code Unitï¼‰ |
| ê°€  | `U+AC00`   | `0xAC00` ï¼ˆ1 Code Unitï¼‰ |


Unicode ãŒä½œã‚‰ã‚ŒãŸå½“æ™‚ï¼ˆ1991å¹´ã”ã‚ï¼‰ã¯ã“ã‚Œã§å……åˆ†ã ã£ãŸã¨æ€ã„ã¾ã™ãŒã€ã¨ããŒçµŒã¤ã«ã¤ã‚Œã¦æ–‡å­—ã¯ã©ã‚“ã©ã‚“å¢—ãˆã¦ãã¾ã—ãŸã€‚1990å¹´ä»£ã®äººã¯çµµæ–‡å­—ã¨ã‹ãŒå‡ºã¦ãã‚‹ã¨ã¯æ€ã£ã¦ãªã‹ã£ãŸã§ã—ã‚‡ã†ã€‚

çµå±€ BMP ã ã‘ã§ã¯å¢—ãˆã¦ã„ãæ–‡å­—ã‚’å…¨éƒ¨è¡¨ç¾ã™ã‚‹ã“ã¨ã¯ã§ããšã€BMP ã‚’è¶…ãˆãŸé ˜åŸŸã¾ã§æ‹¡å¼µã—ã¦æ–°ã—ã„æ–‡å­—ã‚’å¯¾å¿œã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚ãã®æ–°ã—ã„ç¯„å›²ã‚’**SMP**ï¼ˆ**Supplementary Multilingual Plane, è¿½åŠ å¤šè¨€èªé¢**ï¼‰ã¨è¨€ã„ã¾ã™ã€‚


ãŸã ã€1 Code Point ã‚’ 1 Code Unit ã§è¡¨ç¾ã§ãã‚‹ã®ã¯ BMP ã¾ã§ã§ã€ãã®ç¯„å›²ã‚’è¶…ãˆãŸ SMP ã ã¨ 2 Code Unit ä»¥ä¸ŠãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

ãã‚Œã§èª•ç”Ÿã—ãŸã‚‚ã®ãŒ**2å€‹ã® Code Unit ã‚’çµ„ã¿åˆã‚ã›ã¦1å€‹ã® Code Point ã‚’è¡¨ç¾ã—ãŸä»•çµ„ã¿ã€ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢**ã§ã™ã€‚

| æ–‡å­— | Code Point | UTF-16 Code Unitï¼ˆHEXï¼‰         |
|----|------------|-------------------------------|
| ğŸ˜† | `U+1F606`  | `0xD83D 0xDE06` ï¼ˆ2 Code Unitï¼‰ |
| ğŸ‘ | `U+1F44D`  | `0xD83D 0xDC4D` ï¼ˆ2 Code Unitï¼‰ |
| ğŸ€„ | `U+1F004`  | `0xD83C 0xDC04` ï¼ˆ2 Code Unitï¼‰ |

ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã¯è‹±èªã§ Surrogate Pairï¼ˆSurrogate = ä»£ç†ã€Pair=2äººï¼‰ ãªã®ã§ã€æ–°ã—ãä½•ã‹ã‚’ä½œã‚‹ä»£ã‚ã‚Šã«äºŒäººï¼ˆ2 Code Unitï¼‰åˆã‚ã›ã¦æ–°ã—ã„æ–‡å­—ã‚’è¡¨ç¾ã—ã¦ã„ã‚‹ã¨ã„ã†æ„å‘³ã‹ãªâ€¦ã¨å‹æ‰‹ã«æ€ã£ã¦ã¾ã™ã€‚

ã“ã“ã§æœ¬é¡Œã«å…¥ã‚Šã¾ã™ã€‚**JavaScript æ–‡å­—åˆ—ã® `length` ã¯ Code Unit ã®æ•°ã‚’æ•°ãˆã¾ã™**ã€‚

ã ã‹ã‚‰ã“ã†ã„ã†ç¾è±¡ãŒèµ·ãã¾ã™ã€‚

```javascript
console.log("A".length) // Code Unit ãŒ `0x0041` 1å€‹ã ã‹ã‚‰ 1
console.log("ğŸ˜†".length) // Code Unit ãŒ `0xD83D 0xDE06` ï¼’å€‹ã ã‹ã‚‰ 2
```

ãªã‚‹ã»ã©ã€`"ğŸ˜†".length` ãŒ2ã‚’å‡ºåŠ›ã™ã‚‹ç†ç”±ã¯ã‚ã‹ã‚Šã¾ã—ãŸã€‚

ã§ã¯ã“ã‚Œã¯ãªã‚“ã§ã—ã‚‡ã†ï¼

```javascript
console.log("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦".length) // 11
```

å®Ÿã¯è¤‡æ•°ã® Code Point ã‚’ãã£ã¤ã‘ã¦æ–°ã—ã„æ–‡å­—ã‚’ä½œã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ 

ãã®ã¨ãæ–‡å­—ã¨æ–‡å­—ã‚’ãã£ã¤ã‘ã‚‹ã®ã‚Šã¿ãŸã„ãªå½¹å‰²ã‚’ã™ã‚‹ç‰¹æ®Šãªåˆ¶å¾¡æ–‡å­—ã‚’ **ZWJ**ï¼ˆ**Zero Width Joinerã€ã‚¼ãƒ­å¹…æ¥åˆå­**ï¼‰ã¨è¨€ã„ã€ZWJ ã§è¤‡æ•°ã®æ–‡å­—ã‚’çµåˆã—ã¦ä½œã‚‰ã‚ŒãŸæ–‡å­—ã¯**ZWJã‚·ãƒ¼ã‚±ãƒ³ã‚¹**ï¼ˆ**ZWJ Sequence**ï¼‰ã¨è¨€ã„ã¾ã™ã€‚

`ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦` ãŒãã®ä¸€ä¾‹ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

// ç”»åƒ

ã§ã¯ `ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦` å„æ§‹æˆè¦ç´ ã® Code Pointã€Code Unit ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

// ç”»åƒ

ã“ã®ã‚ˆã†ã«å„æ§‹æˆè¦ç´ ã® Code Unit ã‚’å…¨éƒ¨è¶³ã—ãŸã‚‰11å€‹ãªã®ã§ã€`length` ã¯ 11 ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

```javascript
console.log("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦".length) // 11
```

## 3. JavaScript ã«äººã®èªè­˜ã‚’ã‚‚ãŸã›ã‚‹

`.length` ã®å‹•ãã¯ç†è§£ã§ãã¾ã—ãŸã€‚ã§ã‚‚äººã¯æ–‡å­—æ•°ã‚’æ•°ãˆã‚‹ã¨ã Code Unit ã¯æ•°ãˆã¾ã›ã‚“ã€‚ã»ã¨ã‚“ã©ã®å ´åˆè¦‹ãŸç›®ã®åŒºåˆ‡ã‚Šã€ã¤ã¾ã‚Šæ›¸è¨˜ç´ åŸºæº–ã§æ–‡å­—ã‚’æ•°ãˆã‚‹ã¨æ€ã„ã¾ã™ã€‚

ã§ã¯ JavaScript ã«ã‚‚ãã®èªè­˜ã‚’ã‚‚ãŸã›ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

### 3-1. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ + `Array.length` (ä¸å®Œå…¨)

æ–‡å­—åˆ—ã«ãŠã‘ã‚‹ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ (`...`) ã¯æ–‡å­—åˆ—ã‚’1æ–‡å­—ï¼ˆ1 Code Pointï¼‰ãšã¤ã®é…åˆ—ã«å¤‰æ›ã—ã¾ã™ã€‚ãªã®ã§ã€`[..."ğŸ˜†"]` ã‚’ã™ã‚‹ã¨ 1 Code Point ã”ã¨ã«åŒºåˆ‡ã£ãŸé…åˆ—ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚

ã¤ã¾ã‚Šã€ã“ã®é…åˆ—ã® `length` ã‚’è¨ˆç®—ã™ã‚‹ã¨ãã¯**æ•°ãˆã‚‹å¯¾è±¡ãŒ Code Unit ã˜ã‚ƒãªãã¦ Code Point** ã«ãªã‚Šã¾ã™ã€‚

```javascript
console.log("ğŸ˜†".length) // 2 (Code Unit ã‚’æ•°ãˆã‚‹)
console.log([..."ğŸ˜†"].length) // 1 (Code Point ã‚’æ•°ãˆã‚‹)
```

ã“ã‚Œã§ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã‚‚ Code Point åŸºæº–ã§æ–‡å­—æ•°è¨ˆç®—ãŒã§ãã¾ã—ãŸã€‚ 

ã§ã™ãŒã€ã“ã®æ–¹æ³•ã¯**ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã‚’çµåˆã—ãŸæ–‡å­—ã®å ´åˆã¯ä¸Šæ‰‹ãã„ã‹ãªã„**ã§ã™ã€‚


```javascript
console.log("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦".length) // 11 (Code Unit ã‚’æ•°ãˆã‚‹)
console.log([..."ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"].length) // 7 (Code Point ã‚’æ•°ãˆã‚‹)
```

`[..."ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"]` ã—ã¦ 1 Code Point ã”ã¨ã«åŒºåˆ‡ã£ãŸé…åˆ—ã‚’ä½œã‚‹ã¨ `["ğŸ‘¨", "â€", "ğŸ‘©", "â€", "ğŸ‘§", "â€", "ğŸ‘¦"]` ã«ãªã‚Šã€Code Point ã‚’æ•°ãˆãŸã‚‰7ã«ãªã‚Šã¾ã™ï¼ˆã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢4å€‹ + ZWJï¼“å€‹ï¼‰ã€‚

// ç”»åƒ

### 3-2. `Intl.Segmenter`

`Intl.Segmenter` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã†ã¨æ–‡å­—åˆ—ã‹ã‚‰æ„å‘³ã®ã‚ã‚‹é …ç›®ã‚’å–å¾—ã§ãã¾ã™ã€‚ã¤ã¾ã‚Šã€**æ–‡å­—åˆ—ã‚’äººãŒèªè­˜ã§ãã‚‹å˜ä½ã«åˆ†å‰²ã§ãã¾ã™**ã€‚

https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Intl/Segmenter/Segmenter

ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆ©ç”¨ã—ã¦ã€JavaScript ã«æ›¸è¨˜ç´ ã‚’æ•°ãˆã‚‹ã‚ˆã†ã«ã—ãŸã‚‰äººã¨åŒã˜æ„Ÿè¦šã§æ–‡å­—ã‚’æ•°ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```javascript
// locale ã‚’æ—¥æœ¬ã«ã€ç²’åº¦ï¼ˆgranularityï¼‰ã‚’æ›¸è¨˜ç´ ï¼ˆgraphemeï¼‰ã«æŒ‡å®š
const segmenter = new Intl.Segmenter("ja", { granularity: "grapheme" });

console.log("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦".length) // 11 (Code Unit ã‚’æ•°ãˆã‚‹)
console.log([...segmenter.segment("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦")].length) // 1 (æ›¸è¨˜ç´ ã‚’æ•°ãˆã‚‹)
```

ã“ã‚Œã‚’è¸ã¾ãˆã¦æ–‡å­—ã‚’æ•°ãˆã‚‹é–¢æ•°ã§ã‚‚ä½œã£ã¨ã„ãŸã‚‰å†åˆ©ç”¨ã§ãã¦ä¾¿åˆ©ã§ã—ã‚‡ã†ï¼

```typescript:countChar.ts
const segmenter = new Intl.Segmenter("ja", { granularity: "grapheme" });
const countChar = (string: string) => {
    return [...segmenter.segment(string)].length
}
```
```typescript
console.log(countChar("A")) // 1
console.log(countChar("ğŸ˜†")) // 1
console.log(countChar("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦")) // 1
```

## ğŸŒ· çµ‚ã‚ã‚Š

ã¡ãªã¿ã« `.split("")` ã¯ UTF-16 ã® **Code Unit åŸºæº–ã§åˆ†å‰²ã•ã‚Œã‚‹**ãŸã‚ã€ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã‚„ ZWJ ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’åˆ†æ–­ã™ã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚

```typescript
console.log("A".split("")) // ['A']
console.log("ğŸ˜†".split("")) // ['\uD83D', '\uDE06']
console.log("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦".split("")) // ['\uD83D', '\uDC68', 'â€', '\uD83D', '\uDC69', 'â€', '\uD83D', '\uDC67', 'â€', '\uD83D', '\uDC66']
```

ã“ã®å ´åˆã‚‚ `Intl.Segmenter` ã‚’ä½¿ã†ã¨æ›¸è¨˜ç´ ã”ã¨ã«åˆ†å‰²ã§ãã¾ã™ã€‚

```typescript:splitString.ts
const segmenter = new Intl.Segmenter("ja", { granularity: "grapheme" });
const splitString = (string: string) => {
    return [...segmenter.segment(string)].map(({ segment }) => segment)
}
```

`segmenter.segment(str)` ã¯ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ã‚’è¿”ã—ã€å„è¦ç´ ã¯ `{ segment, index, isWordLike }` ãªã©ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚æ–‡å­—ãã®ã‚‚ã®ã¯ `segment` ã«å…¥ã£ã¦ã„ã‚‹ã®ã§ã€`map` ã§ `segment` ã ã‘æŠ½å‡ºã™ã‚‹ã“ã¨ã§æ–‡å­—ã”ã¨ã®é…åˆ—ãŒä½œã‚Œã¾ã™ã€‚

```typescript
console.log(splitString("A")) // ['A']
console.log(splitString("ğŸ˜†")) // ['ğŸ˜†']
console.log(splitString("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦")) // ['ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦']
console.log(splitString("AğŸ˜†ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦")) // ['A', 'ğŸ˜†', 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦']
```