---
title: "createAsyncThunk ã®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§è‹¦æˆ¦ã—ãŸè©±"
emoji: "ğŸ˜‡"
type: "tech"
topics: ["react", "typescript", "redux", "reduxtoolkit"]
published: true
published_at: "2021-05-21 10:26"
---

## å§‹ã‚

[createSliceã®è¨˜äº‹](https://zenn.dev/luvmini511/articles/819d8c7fa13101)ã§ selector ã«ã¤ã„ã¦æ›¸ããŸã„ã¨ã¤ã¶ã‚„ã„ã¦ã¾ã—ãŸãŒã€ãã®å‰ã«é•ã†è©¦ç·´ã‚’ä¹—ã‚Šè¶Šãˆã¦åˆ¥ãƒã‚¿ãŒã§ãã¾ã—ãŸç¬‘ã€‚

æœ€åˆã¯`createAsyncThunk`ã‚’ã“ã‚“ãªæ„Ÿã˜ã§ä½¿ã£ã¦ã¾ã—ãŸã€‚å•é¡Œãªã‹ã£ãŸã§ã™ã€‚

```typescript
export const fetchTodos = createAsyncThunk<Array<Todo>>('todo/fetchTodos', async () => {
  const response = await TodoServices.fetchTodos();
  return response.data;
});
```

å¾Œã§ try-catch æ–‡ã§ã‚¨ãƒ©ãƒ¼å‡¦ç†ã—ã‚ˆã†ï¼ã¨æ€ã£ã¦ç›´ã—ãŸç¬é–“ã€
```typescript
export const fetchTodos = createAsyncThunk<Array<Todo>>('todo/fetchTodos', async () => {
  try {
    const response = await TodoServices.fetchTodos();
    return response.data;
  } catch (error) {
    console.error(error);
  }
});
```

**äº‹ä»¶ã¯èµ·ããŸã®ã§ã™ã€‚**
```typescript
Argument of type '() => Promise<Todo[] | undefined>' is not assignable to parameter of type 'AsyncThunkPayloadCreator<Todo[], void, {}>'.   
Type 'Promise<Todo[] | undefined>' is not assignable to type 'AsyncThunkPayloadCreatorReturnValue<Todo[], {}>'.     
Type 'Promise<Todo[] | undefined>' is not assignable to type 'Promise<Todo[] | RejectWithValue<unknown>>'.       
Type 'Todo[] | undefined' is not assignable to type 'Todo[] | RejectWithValue<unknown>'.         
Type 'undefined' is not assignable to type 'Todo[] | RejectWithValue<unknown>'.
```
	
è¨³ã®ã‚ã‹ã‚‰ãªã„é•·æ–‡ã®ã‚¨ãƒ©ãƒ¼ã§ã‚ã¡ã‚ƒãã¡ã‚ƒæ€’ã‚‰ã‚Œã¾ã—ãŸã€‚èª¿ã¹ãŸã‚‰å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…¥ã‚Œãªã„ã¨ã„ã‘ãªã„ã‚ˆã†ã§ã—ãŸã€‚

ã€Œ**ã„ã‚„ã„ã‚„ã€try-catch æ–‡å…¥ã‚Œã‚‹å‰ã¯æ€’ã£ã¦ãªã‹ã£ãŸã˜ã‚ƒã‚“**ã€ã¨ã‹ã€Œ**å‹ã£ã¦ã©ã“ã®å‹ã ã‚ˆ**ã€ã¨ã‹ã€ã•ã‚“ã–ã‚“æ‚©ã‚“ã ã®ã§ã€ç§ã¨åŒã˜è‹¦ã—ã¿ã‚’å‘³ã‚ã£ã¦ã‚‹æ–¹ã€…ã®ãŸã‚ã«ã¾ã¨ã‚ã¾ã™ã€‚
	
	
## 1. createAsyncThunk ã®å¼•æ•°

ã¾ãšã¯è½ã¡ç€ã„ã¦`createAsyncThunk`ã®å¼•æ•°ã‹ã‚‰æŠŠæ¡ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

```typescript
import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'
import { userAPI } from './userAPI'

const fetchUserById = createAsyncThunk(
  // type(ç¬¬1å¼•æ•°)
  'users/fetchByIdStatus',
  
  // payloadCreator(ç¬¬2å¼•æ•°)
  async (userId, thunkAPI) => {
    const response = await userAPI.fetchById(userId)
    return response.data
  }
  
  // Options(ç¬¬3å¼•æ•°ã€ä»»æ„)
)
```

### 1-1. type
```typescript
'users/fetchByIdStatus'
```

`type`ã¯**è¿½åŠ ã® action type ç”Ÿæˆã«ä½¿ã‚ã‚Œã‚‹æ–‡å­—åˆ—**ã§ã™ã€‚éåŒæœŸå‡¦ç†ã«ã¯ pendingã€fulfilledã€rejected ã®3ã¤ã®çŠ¶æ…‹ãŒã„ã¤ã‚‚å­˜åœ¨ã—ã¾ã™ã®ã§ã€ãã‚Œã«å¯¾ã™ã‚‹ action type ã‚’ç”Ÿæˆã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚

ä¸Šè¨˜ã®ä¾‹ã ã¨ type ãŒ`users/fetchByIdStatus`ãªã®ã§ã€ã“ã†ã„ã† action ãŸã¡ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚
- pending: `'users/requestStatus/pending'`
- fulfilled: `'users/requestStatus/fulfilled'`
- rejected: `'users/requestStatus/rejected'`

### 1-2. payloadCreator
```typescript
async (userId, thunkAPI) => {
    const response = await userAPI.fetchById(userId)
    return response.data
  }
```

`payloadCreator`ã¯**ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°**ã§ã€éåŒæœŸå‡¦ç†ã®çµæœå«ã‚€ Promise ã‚’è¿”ã—ã¾ã™ã€‚åå‰é€šã‚Š`payload`ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°ã¨ã„ã†ã“ã¨ã§ã™ã­ã€‚

ã“ã®`payloadCreator`é–¢æ•°ã‚‚2ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚

**arg**
ç¬¬1å¼•æ•°ã§ã‚ã‚‹**1ã¤ã®å€¤**ã§ã™ã€‚action ãŒ dispatch ã•ã‚Œã‚‹ã¨ãã«æ¸¡ã•ã‚Œã‚‹å¼•æ•°ã‚’å«ã¿ã¾ã™ã€‚ä¸Šè¨˜ã®ä¾‹ã ã¨`userId`ãŒã“ã® arg ã«å½“ã¦ã¯ã¾ã‚Šã¾ã™ã€‚

**thunkAPI**
ä»¥ä¸‹ã® key ã‚’å«ã‚€**ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**ã§ã™ã€‚
- `dispatch`
- `getState`
- `extra`
- `requestId`
- `signal`
- `rejectWithValue`

`dispatch`ã€`getState`ã¯é¦´æŸ“ã¿ã‚ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã—ã€`rejectWithValue`ã¯ã‚¨ãƒ©ãƒ¼å‡¦ç†ã™ã‚‹ã¨ãä½¿ã†é–¢æ•°ã§ã™ã€‚(å„ key ã«å¯¾ã™ã‚‹ã®èª¬æ˜ã¯[å…¬å¼ã‚µã‚¤ãƒˆ](https://redux-toolkit.js.org/api/createAsyncThunk#payloadcreator)ã«ã‚‚è¼‰ã£ã¦ã¾ã™ã€‚)

æœ€åˆã¯ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€ã€Œ`payloadCreator`ã®å†…ã§ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã« thunk middleware ãŒæä¾›ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãŸã¡ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã¿ãŸã„ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã¯ãªã„ã‹ãªã¨æ€ã„ã¾ã—ãŸã€‚

### 1-3. Options

`Options`ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãªãƒ•ã‚£ãƒ«ãƒ‰ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚ä»»æ„ã§ã™ã—ã€ä»Šå›æ‰±ã‚ãªã„ã®ã§å‰²æ„›ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚æ°—ã«ãªã‚‹æ–¹ã¯[å…¬å¼ã‚µã‚¤ãƒˆ](https://redux-toolkit.js.org/api/createAsyncThunk#options)ã‚’ã”å‚è€ƒãã ã•ã„ã€‚

## 2. createAsyncThunk ã®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

`createAsyncThunk`ã¯å¼•æ•°ä»¥å¤–ã«å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚3ã¤å—ã‘å–ã‚Šã¾ã™ã€‚

```typescript
const fetchUserById = createAsyncThunk<
  // payloadCreator ã®è¿”ã‚Šå€¤ã®å‹
  MyData,
  // payloadCreator ã®ç¬¬1å¼•æ•°(arg)ã®å‹
  number,
  {
    // payloadCreator ã®ç¬¬2å¼•æ•°(thunkApi)ã®ãŸã‚ã®å‹
    state: State
    extra: {
      jwt: string
    }
  }
>('users/fetchById', async (userId, thunkApi) => {
  const response = await fetch(`https://reqres.in/api/users/${userId}`, {
    headers: {
      Authorization: `Bearer ${thunkApi.extra.jwt}`,
    },
  })
  return (await response.json()) as MyData
})
```

å…¨éƒ¨ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°`payloadCreator`ã«é–¢ã‚ã‚‹å‹ã§ã™ã­ã€‚

ã“ã“ã§æˆ¦ã„ãŒå§‹ã¾ã‚Šã¾ã—ãŸã€‚

ç¬¬2å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§`payloadCreator`ã®ç¬¬1å¼•æ•°(arg)ã®å‹ã‚’å®šç¾©ã—ã¦ã¾ã™ãŒã€**ç§ã®ã‚³ãƒ¼ãƒ‰ã§ã¯`payloadCreator`ãŒå¼•æ•°ã‚’æŒãŸãªã„é–¢æ•°ã ã£ãŸ**ã®ã§ã™ã€‚

ã¾ãŸã€`payloadCreator`ã®è¿”ã‚Šå€¤ã®å‹ã¨ç¬¬1å¼•æ•°(arg)ã®å‹ã¯åˆ†ã‹ã‚Šã¾ã™ã‘ã©ã€ã€Œ**æœ€å¾Œã®ç¬¬2å¼•æ•°(thunkApi)ã®ãŸã‚ã®å‹ã£ã¦ãªã‚“ã ï¼Ÿã©ã“ã®æ–¹ã‚’å®šç¾©ã—ã¦ã‚‹ã‚“ã ï¼Ÿã¾ã˜ã§ã‚ã‹ã‚‰ã‚“â€¦**ã€çŠ¶æ…‹ãŒç¶šã„ã¦ã¾ã—ãŸã€‚

ã“ã®2ç‚¹ã§2æ—¥ã»ã©æ‚©ã‚“ã§ã¾ã—ãŸâ€¦

## 3. è‹¦æˆ¦ã—ãŸéƒ¨åˆ†

### 3-1. payloadCreator ã«å¼•æ•°ãŒã„ã‚‰ãªã„

æœ€åˆã«ãŠè¦‹ã›ã—ãŸé€šã‚Šã“ã‚ŒãŸç§ãŒæ›¸ã„ã¦ãŸã‚³ãƒ¼ãƒ‰ã§ã™ãŒã€
```typescript
export const fetchTodos = createAsyncThunk<Array<Todo>>('todo/fetchTodos', async () => {
  const response = await TodoServices.fetchTodos();
  return response.data;
});
```
`payloadCreator`ãŒ**å¼•æ•°ã‚’å—ã‘å–ã‚‰ãªã„**ã§ã™ã€‚

ã©ã†ã—ã‚ˆã†â€¦ï¼Ÿã¨æ€ã£ã¦æœ¬å½“ã«ã‚ã£ã¡ã‚ƒèª¿ã¹ã¦ã€çµæœçš„ã«ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ã§è§£æ±ºã—ã¾ã—ãŸã€‚

```typescript
export const fetchTodos = createAsyncThunk<Array<Todo>, undefined, {}>(
  'todo/fetchTodos',
  // ç¬¬1å¼•æ•°ã‚’`_`ã«ã™ã‚‹
  async (_, { rejectWithValue }) => {
    try {
      const response = await TodoServices.fetchTodos();
      return response.data;
    } catch (error) {
      return rejectWithValue('ãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  },
);
```
**ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®ãŸã‚ã«`payloadCreator`ã®ç¬¬2å¼•æ•°(thunkAPI)ã‹ã‚‰å¼•ã£å¼µã£ã¦ããŸ`rejectWithValue`ã¯ä½¿ã†ã‘ã©ã€ç¬¬1å¼•æ•°ã¯ä½¿ã‚ãªã„ã®ã§`_`ã§å‡¦ç†**ã—ã¾ã—ãŸã€‚`_`ã§æ›¸ã„ãŸã‚‰ã€Œã“ã„ã¤ã¯ç„¡è¦–ã™ã‚‹ã€ä½¿ã‚ãªã„ã€ã¨ã„ã†æ„å‘³ã‚‰ã—ã„ã§ã™ã­(åˆã‚ã¦çŸ¥ã£ãŸ)ã€‚ä½¿ã‚ãªã„ã®ã§ã€å‹ã‚‚`undefined`ã«æŒ‡å®šã—ã¾ã—ãŸã€‚

### 3-2. ç¬¬ï¼“å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¬

æ¬¡ã¯3ç•ªç›®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¬ã§ã™ã€‚

ã¨ã‚Šã‚ãˆãšæ¢ã£ã¦ã¿ãŸã‚‰ã€3ç•ªç›®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è‡ªä½“ã¯ä»¥ä¸‹ã®**4ã¤ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å«ã‚€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**ã ã¨ã„ã†ã“ã¨ã¯ã‚ã‹ã‚Šã¾ã—ãŸã€‚

- `dispatch`
- `state`
- `extra`
- `rejectValue`

`thunkAPI`ã¨ä¼¼ã¦ã¾ã™ã­ã€‚ã¡ãªã¿ã«ã“ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŸã¡ã¯å…¨éƒ¨ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã§ã™ã€‚å¤šåˆ†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ãƒ«ãƒ¼ãƒ«ãŒå…¨ç„¶é•ã†ã‹ã‚‰ã‚«ã‚¹ã‚¿ãƒ ã§ãã‚‹ã‚ˆã†ã«å…¨éƒ¨ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«ã—ãŸã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚

å¤§äº‹ãªã®ã¯ã€ã“ã®**ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã©ã“ã®å‹ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã®ã‹**ã§ã™ã€‚ã“ã“ã‹ã‚‰ã¯ã‚‚ã†å®Ÿé¨“ã§ã™ã€‚

ã¾ãšã¯3ç•ªç›®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«`rejectValue`ã®å‹ã‚’(é©å½“ã«)æŒ‡å®šã—ã¦ã¿ã¾ã—ãŸã€‚

```typescript
export const fetchTodos = createAsyncThunk<
  Array<Todo>,
  undefined,
  {
    rejectValue: string;
  }
>('todo/fetchTodos', async (_, { rejectWithValue }) => {
  try {
    const response = await TodoServices.fetchTodos();
    return response.data;
  } catch (error) {
    return rejectWithValue('ãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
  }
});
```
ãã—ã¦ã“ã®ã¾ã¾`rejectWithValue`ã®å‹ã‚’ç¢ºèªã—ã¾ã™ã€‚

```typescript
rejectWithValue: (value: string) => RejectWithValue<string>
```
ã¡ã‚ƒã‚“ã¨`rejectValue`ã§å®šç¾©ã—ãŸ`string`ãŒå…¥ã£ã¦ã¾ã™ã€‚

ä»Šåº¦ã¯`payloadCreator`ã®ç¬¬2å¼•æ•°ã«`getState`ã‚‚è¿½åŠ ã—ã¦ã¿ã¾ã—ãŸã€‚

```typescript
export const fetchTodos = createAsyncThunk<
  Array<Todo>,
  undefined,
  {
    rejectValue: string;
  }
>('todo/fetchTodos', async (_, { rejectWithValue, getState }) => { //è¿½åŠ 
  try {
    const response = await TodoServices.fetchTodos();
    return response.data;
  } catch (error) {
    return rejectWithValue('ãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
  }
});
```
ã“ã®ã¾ã¾`getState`ã®å‹ã‚’ç¢ºèªã™ã‚‹ã¨`getState: () => unknown`ã«ãªã£ã¦ã¾ã™ã€‚ã§ã¯ã€3ç•ªç›®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«`state`ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```typescript
  {
    rejectValue: string;
    state: TodoState; //è¿½åŠ 
  }
```

ã“ã†ã™ã‚‹ã¨`getState`ã®å‹ãŒ`getState: () => TodoState`ã«ãªã‚Šã¾ã—ãŸã€‚

**ãªã‚“ã‹ã‚ã‹ã‚Šãã†ãªæ°—ãŒã—ã¾ã›ã‚“ã‹ï¼Ÿ**

ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä¸ŠãŒã£ã¦`rejectValue`ã¨`getState`ã®å‹ãŒå®šç¾©ã•ã‚Œã¦ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¦ã¿ã¾ã—ãŸã€‚

```typescript
declare type BaseThunkAPI<S, E, D extends Dispatch = Dispatch, RejectedValue = undefined> = {
    dispatch: D;
    getState: () => S;
    extra: E;
    requestId: string;
    signal: AbortSignal;
    rejectWithValue(value: RejectedValue): RejectWithValue<RejectedValue>;
};
```
ãªã‚‹ã»ã©ãªã‚‹ã»ã©ã€‚ã¤ã¾ã‚Šã€3ç•ªç›®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€

- `dispatch` â†’ `D`ã®å‹
- `state` â†’ `S`ã®å‹
- `extra` â†’ `E`ã®å‹
- `rejectValue` â†’ `RejectedValue`ã®å‹

ã‚’å®šç¾©ã—ã¦ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ã¨ï¼æ€ã„ã¾ã—ãŸï¼`requestId`ã¨`signal`ã¯å‹ãŒå›ºå®šã•ã‚Œã¦ã‚‹ã‹ã‚‰åˆ¥é€”ã§å®šç¾©ã™ã‚‹å¿…è¦ãŒãªãã€3ç•ªç›®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰ã‚‚æŠœã‘ãŸã®ã§ã—ã‚‡ã†ï¼


## 4. try-catch æ–‡ã¨å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®é–¢ä¿‚

ãã‚Œã§ã¯æœ€å¾Œã®è¬ã§ã™ã€‚**ãªãœ try-catch æ–‡ã‚’å…¥ã‚Œã‚‹å‰ã«ã¯å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—ã§ã‚‚å¹³æ°—ã ã£ãŸã®ã«ã€try-catch æ–‡ã‚’å…¥ã‚ŒãŸã‚‰æ€¥ã«å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå¿…è¦ã«ãªã£ãŸã®ã‹ï¼Ÿ** ãã‚Œã‚’è§£èª¬ã—ã¾ã™ã€‚

try-catch æ–‡ã§ã¯ã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚’ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã­ã€‚

redux-toolkit ã¯ async é–¢æ•°å†…ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã¨ãã€ rejected action ã‚’ dispatch ã—ã¾ã™ã€‚ãã—ã¦ã“ã® rejected action ã‚’ã‚«ã‚¹ã‚¿ãƒ ã™ã‚‹ãŸã‚ã«ã¯ã€ç›´æ¥ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒƒãƒã—ã€`thunkAPI.rejectWithValue` é–¢æ•°ã‚’ä½¿ã£ã¦æ–°ã—ã„å€¤ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```typescript
async (userData, { rejectWithValue }) => {
  const { id, ...fields } = userData
  try {
    const response = await userAPI.updateById(id, fields)
    return response.data.user
  } catch (err) {
    return rejectWithValue(err.response.data)
  }
}
```
ã“ã‚“ãªæ„Ÿã˜ã§`thunkAPI`ãŒæä¾›ã™ã‚‹`rejectWithValue`é–¢æ•°ã§ã‚¨ãƒ©ãƒ¼ã‚’å‡¦ç†ã™ã‚‹ã¨ã€å¼•æ•°(`err.response.data`)ã‚’`action.payload`ã¨ã—ã¦ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã¤ã¾ã‚Šã€**`thunkAPI`ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†å¿…è¦ãŒç™ºç”Ÿ**ã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã­ã€‚ãã—ã¦**ã“ã“ã§å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚å¿…è¦**ã«ãªã‚Šã¾ã™ã€‚ãªãœãªã‚‰ã€ã“ã®å­ãŸã¡ã¯**å‹ãŒæ¨è«–ã§ããªã„**ã‹ã‚‰ã§ã™ã€‚

ã¾ãŸã€Typescript ã¯**ç›´æ¥å®šç¾©ã—ãŸå‹ã¨æ¨è«–ã•ã‚ŒãŸå‹ã‚’ãƒŸãƒƒã‚¯ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“**ã€‚ã¤ã¾ã‚Š`thunkApi`ã®å‹ã‚’ç›´æ¥å®šç¾©ã™ã‚‹ã“ã¨ã«ãªã£ãŸã‚‰ã€ãã‚Œã«ã¤ã‚‰ã‚Œã¦`payloadCreator`ã®è¿”ã‚Šå€¤ã¨ç¬¬1å¼•æ•°ã®å‹ã¾ã§ç›´æ¥å®šç¾©ã—ãªã‘ã‚Œã°ãªã‚‰ãªããªã‚Šã¾ã™ã€‚

ãã†ã„ã†ã‚ã‘ã§ã€`thunkAPI`ã‚’ä½¿ã†ãŸã‚ã«ãƒˆãƒ¼ã‚¿ãƒ«3ã¤å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå¿…è¦ã«ãªã£ãŸã®ã§ã™ã€‚


## çµ‚ã‚ã‚Š
ã»ã¼[å…¬å¼ã‚µã‚¤ãƒˆ](https://redux-toolkit.js.org/usage/usage-with-typescript#createasyncthunk)ã‚’å‚è€ƒã—ã¦æ›¸ãã¾ã—ãŸã€‚è‹±èªèª­ã‚€ã®ã‚ã‚“ã©ãã•ã„ã‹ã‚‰ã¤ã„ã¤ã„ã‚µãƒœã£ã¦ã—ã¾ã„ã¾ã™ã‘ã©ã€ã‚„ã¯ã‚Šå…¬å¼ã‚µã‚¤ãƒˆãŒä¸€ç•ªã§ã™ã­ã€‚