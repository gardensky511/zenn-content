---
title: "ã‚¿ãƒ—ãƒ«å‹ T ã«ãŠã„ã¦ã€ãªãœ T[number] ã¯Unionå‹ã«ãªã‚‹ã®ã‹ã«é–¢ã™ã‚‹è€ƒå¯Ÿ"
emoji: "ğŸ”¥"
type: "tech"
topics: ["typescript", "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰"]
published: true
published_at: "2021-04-19 14:31"
---

## å§‹ã‚

æœ€è¿‘ [type-challenges](https://github.com/type-challenges/type-challenges) ã‚’é ‘å¼µã£ã¦æŒ‘æˆ¦ã—ã¦ã„ã¾ã™(é›£ã—ãã¦å…¨ç„¶ã¨ã‘ã¦ãªã„)ã€‚

ã“ã®é–“ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ›¸ãæ–¹ã‚’è¦šãˆã¾ã—ã¦ã€

```typescript
type Colors = ["white", "red", "black", "purple"]
type ColorsUnion = Colors[number] //ã€€"white" | "red" | "black" | "purple"
```
ã€Œ**ãˆï¼Ÿï¼Ÿãªã‚“ã§ï¼Ÿï¼Ÿ**ã€ã¨æ€ã„ã¾ã—ãŸã€‚ãã®ã€Œãªã‚“ã§ï¼Ÿã€ã‚’æ¢ã£ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

## 1. ã‚¿ãƒ—ãƒ«å‹

ã¾ãšã¯åŸºæœ¬ã®ã‚¿ãƒ—ãƒ«å‹ã«ã¤ã„ã¦ [Typescript å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.typescriptlang.org/docs/handbook/2/objects.html#tuple-types)ã«èª¬æ˜ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒˆã‚’èª­ã¿ã¾ã—ãŸã€‚

> A tuple type is another sort of Array type that **knows exactly how many elements it contains, and exactly which types it contains at specific positions.**

```typescript
type StringNumberPair = [string, number];
```

ã–ã£ãã‚Šè¨€ã†ã¨ã€Œè¦ç´ ã®æ•°ã¨ã©ã®è¦ç´ ãŒã©ã®ä½ç½®(index)ã«ã‚ã‚‹ã‹ãŒæ±ºã¾ã£ã¦ã‚‹é…åˆ—å‹ã®ä¸€ç¨®ã€ã§ã™ã­ã€‚

ã“ã“ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ã‚‚ã£ã¨ä¸‹ã«å›ã—ãŸã‚‰å¤§äº‹ãªéƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ã€‚

>simple tuple types like these are **equivalent to types which are versions of `Array`s that declare properties for specific indexes, and that declare `length` with a numeric literal type.**
>*ã“ã®ã‚ˆã†ãªå˜ç´”ãªã‚¿ãƒ—ãƒ«å‹ã¯ã€**ç‰¹å®šã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å®£è¨€ã—ã€numeric literal type ã§`length`ã‚’å®£è¨€ã™ã‚‹`Array`ãŸã¡ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨åŒã˜**ã§ã™ã€‚*

```typescript
interface StringNumberPair {
  // specialized properties
  length: 2;
  0: string;
  1: number;

  // Other 'Array<string | number>' members...
  slice(start?: number, end?: number): Array<string | number>;
}
```

ã€Œã‚¿ãƒ—ãƒ«å‹ã¯ã“ã†ã„ã†`interface`ã¨åŒã˜ã ã‚ˆãƒ¼ã€ã¨æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚ãªã‚‹ã»ã©ãªã‚‹ã»ã©ã€‚


## 2. T[K]

æ¬¡ã¯`T[K]`ã§ã™ã€‚**ã“ã‚Œã¯`T`ã«å¯¾ã—ã¦`K`ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å¾—ã‚‰ã‚Œã‚‹å‹ã‚’è¿”ã™**æ©Ÿèƒ½ã§ã€2016å¹´11æœˆã« [Static types for dynamically named properties](https://github.com/Microsoft/TypeScript/pull/11929) ã¨ã„ã†PRåã§è¿½åŠ ã•ã‚Œã¾ã—ãŸ(çµæ§‹å‰ã§ã™ã­)ã€‚

ç†è§£ã®ãŸã‚è©²å½“PRã‹ã‚‰ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒˆã®ä¸€éƒ¨ã‚’å€Ÿã‚Šã¦ãã¾ã—ãŸã€‚

```typescript
interface Thing {
    name: string;
    width: number;
    height: number;
    inStock: boolean;
}

type P1 = Thing["name"];  // string
type P2 = Thing["width" | "height"];  // number
type P3 = Thing["name" | "inStock"];  // string | boolean
```

ä¾‹ã§è¦‹ãŸã‚‰ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¨ä¸€ç·’ã«ä¸€è¨€èª¬æ˜ã‚‚è¼‰ã›ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

> *Indexed access types* of the form `T[K]`, where `T` is some type and `K` is a type that is assignable to `keyof T` (or **assignable to `number` if `T` contains a numeric index signature**).

ãŠï¼Ÿï¼Ÿ `number`ï¼Ÿï¼Ÿ *numeric index signature*ï¼Ÿï¼Ÿ ãã‚Œã£ã½ã„ã‚‚ã®ãŒå‡ºã¦ãã¾ã—ãŸã€‚

## 3. index signature

æ–°ã—ã„æ‰‹ãŒã‹ã‚Šã§ã‚ã‚‹ *numeric index signature* ã‚’èª¿ã¹ãŸã‚‰ã€[ä»¥å‰ã® Typescript Handbook](https://www.typescriptlang.org/docs/handbook/interfaces.html#indexable-types) ã‹ã‚‰ã“ã†ã„ã†èª¬æ˜ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚

>we can also describe types that we can â€œindex intoâ€ like `a[10]`, or `ageMap["daniel"]`. Indexable types have an **index signature that describes the types we can use to index into the object, along with the corresponding return types when indexing.**

ã¤ã¾ã‚Šã€***index signature* ã¨ã„ã†ã®ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚·ãƒ³ã‚°ã™ã‚‹æ™‚ã«ä½¿ã†å‹ã¨ã€ãã‚Œã«ç›¸å¿œã™ã‚‹è¿”ã‚Šå€¤ã®å‹ã‚’è¨˜è¿°ã“ã¨**ã¨ã‚‚è¨€ãˆã¾ã™ã€‚

ã¤ã„å…ˆè¦‹ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã®ä¸€éƒ¨ã‚’ã‚‚ã†ä¸€åº¦è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
```typescript
interface Thing {
    name: string;
    width: number;
    height: number;
    inStock: boolean;
}

type P1 = Thing["name"];  // string
```
ã“ã‚Œä¾‹ã ã£ãŸã‚‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚·ãƒ³ã‚°ã™ã‚‹æ™‚ã«ä½¿ã†å‹ã¯`"name"`ã€è¿”ã‚Šå€¤ã®å‹ã¯`string`ã«ãªã‚Šã¾ã™ã­ã€‚

ã¡ãªã¿ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚·ãƒ³ã‚°ã™ã‚‹æ™‚ã«ä½¿ãˆã‚‹å‹ã¯`string`ã¨`number`ã®ï¼’ã¤ã ã‘ã§ã™ã€‚

- `string`ã‚’ä½¿ã£ãŸã‚‰? â†’ *string index signature*
- `number`ã‚’ä½¿ã£ãŸã‚‰? â†’ ***numeric index signature***

ãªã‚‹ã»ã©ãªã‚‹ã»ã©ã€‚

## 4. æ¨è«–

å¿…è¦ãªææ–™ã¯æƒã£ãŸã¨æ€ã„ã¾ã™ã®ã§ã€æœ€åˆã«ãŠè¦‹ã›ã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒˆã§æ¨è«–ã‚’å§‹ã‚ã¾ã™ã€‚
```typescript
type Colors = ["white", "red", "black", "purple"]
```
ã¾ãšã€`Colors`ã¯ã‚¿ãƒ—ãƒ«å‹ã§ã™ã®ã§ä»¥ä¸‹ã®`interface`ã¨åŒã˜ã ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚
```typescript
interface Colors {
  length: 4;
  0: "white";
  1: "red";
  2: "black";
  3: "purple";
}
```
ã“ã®`Colors`ã¯`0`ã€`1`ã€`2`ã€`3`ã¨ã„ã† *numeric index signature* ã‚’å«ã‚ã¦ã„ã‚‹ãŸã‚ã€`number`ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚·ãƒ³ã‚°ã§ãã¾ã™ã€‚
```typescript
type ColorsUnion = Colors[number] //ã€€"white" | "red" | "black" | "purple"
```
ãã—ã¦`number`å‹ã§ã‚ã‚‹`0`ã€`1`ã€`2`ã€`3`ãŒãã‚Œãã‚Œã®è¿”ã‚Šå€¤ã‚’è¿”ã—ã¦ã“ã†ã„ã†å¤‰æ›ã«ãªã‚‹ã®ã§ã¯ãªã„ã‹ã¨ï¼ç§ã¯æ€ã„ã¾ã—ãŸï¼

+) ã¡ãªã¿ã«åŒã˜åŸç†ã§ã‚¿ãƒ—ãƒ«å‹ã®`length`ã‚’å–ã‚Šå‡ºã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
```typescript
type ColorsLength = Colors["length"] // 4
```

## 5. T[string]ï¼Ÿ

å®Ÿã¯æœ€åˆã«ã€Œãˆï¼Ÿã“ã†ã„ã†ã®ã§ãã‚‹ã®ï¼Ÿã˜ã‚ƒã€`Colors[string]`ã¨ã‹ã‚‚ã§ãã‚‹ï¼Ÿã€ã¨æ€ã£ã¦è©¦ã—ã¾ã—ãŸã€‚

```typescript
type Colors = ["white", "red", "black", "purple"]
type ColorsString = Colors[string] //Type 'Colors' has no matching index signature for type 'string'
```

ãã—ã¦ã•ã£ããã€Œ`string`ã«å½“ã¦ã¯ã¾ã‚‹ *index signature* ãªã‚“ã¦ãªã„ã‚ˆã€ã¨æ€’ã‚‰ã‚Œã¾ã—ãŸã€‚ç¢ºã‹ã«ã€ã‚¿ãƒ—ãƒ«å‹ã‚’`interface`ã«æ›¸ãæ›ãˆã¦ã‚‚`string`ã® *index signature* ã¯ãªã‹ã£ãŸã‹ã‚‰å½“ãŸã‚Šå‰â€¦ã†ã‚“ï¼Ÿ

**ã‚ã‚Œï¼Ÿ`length`ã¯`string`ã˜ã‚ƒã‚“ï¼Ÿï¼Ÿ**

ã¨æ€ã„ã€ã¾ãŸèª¿ã¹ã¾ã—ãŸã€‚ã¡ã‚‡ã†ã© stackoverflow ã«ç§ã¨åŒã˜è³ªå•ã‚’ã—ãŸäººãŒã„ãŸã®ã§ï¼ˆ[What's the T[number] mean in typescript code?](https://stackoverflow.com/questions/59187941/whats-the-tnumber-mean-in-typescript-code)ï¼‰ã€ãã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚

>You canâ€™t use `T[string]` because **`Array` doesnâ€™t have a string index signature.** Youâ€™re allowed to use those, but `Array` doesnâ€™t. Since it doesnâ€™t have a string index signature, `T[string]` isnâ€™t legal. You can use `T['length']`, though, since **`Array` does have a property with *that particularly string*. Using `string` or `number` refers to any string or numberâ€”which requires an index signature.**

**è¦ç´„**

- `Array`ã¯`string`ã® *index signature* ã‚’æŒã£ã¦ã„ãªã„
- `T['length']`ãŒä½¿ãˆã‚‹ã®ã¯`length`ã¨ã„ã†ç‰¹å®šã®æ–‡å­—åˆ—ã‚’æŒã£ã¦ã‚‹ãŸã‚
- `string` ã‚„ `number`ã‚’ä½¿ã†ã“ã¨ã¯ã™ã¹ã¦ã®æ–‡å­—åˆ—ã€æ•°å­—ã‚’æ„å‘³ã™ã‚‹ã—ã€ãã®ãŸã‚ã«ã¯ *index signature* ãŒå¿…è¦

ãªã‚‹ã»ã©ãªã‚‹ã»ã©ã€‚`T[string]`ã§ã™ã¹ã¦ã® *string index signature* ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ãŸã‚ã«ã¯ *index signature* ãŒå¿…è¦ã¨ã„ã†ã“ã¨ã§ã™ã­ã€‚ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã—ãŸäººã‚‚ãã†è¨€ã£ã¦ã¾ã—ãŸã€‚
```typescript
interface Dictionary<Value> {
    [key: string]: Value;
}
```
>With this, we can use `T[string]` when `T` is some `Dictionary`â€”and `T[string]` will be `Value`.

ãã—ã¦é…åˆ—ã®å ´åˆã¯`length`ã¨ã„ã†ç‰¹å®šã®æ–‡å­—åˆ—ã¯æŒã£ã¦ã‚‹ã‘ã©ã€*index signature* ãŒãªã„ã‹ã‚‰`T[string]`ã¯ã ã‚ã ã£ãŸã¨ã„ã†ã‚ã‘ã§ã§ã—ã‚‡ã†ã€‚

## çµ‚ã‚ã‚Š
*index signature* ã®èª¬æ˜ã¯[ä»¥å‰ã® Typescript Handbook](https://www.typescriptlang.org/docs/handbook/interfaces.html#indexable-types) ã‚’å‚è€ƒã—ã¾ã—ãŸãŒã€ã€Œ**This page has been deprecated** ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ä¸Šã«[æœ€è¿‘ã®Typescript Handbook](https://www.typescriptlang.org/docs/handbook/2/objects.html) ã«ã¯è¼‰ã£ã¦ãªã„ãŸã‚ã‚ã£ã¦ã‚‹ã‹ä¸å®‰ã§ã™ã€‚ã‚‚ã—é–“é•ã£ã¦ã‚‹éƒ¨åˆ†ã‚ã£ãŸã‚‰ãŠã—ãˆã¦ãã ã•ã„ï¼

