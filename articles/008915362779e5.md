---
title: "é›†åˆã¦ã‚™ç†è§£ã™ã‚‹ Typescript"
emoji: "âœ¡ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["typescript", "frontend"]
published: true
---

# ğŸŒ¼ ã¯ã˜ã‚ã«

ç§ã¯é«˜æ ¡ã®æ•°å­¦æ™‚é–“ã«åˆã‚ã¦é›†åˆã«ã¤ã„ã¦æ•™ã‚ã‚Šã¾ã—ãŸãŒã€ãã®æ™‚ã¯å…¨ç„¶çŸ¥ã‚‰ãªã‹ã£ãŸã§ã™ã€‚ã¾ã•ã‹ Typescript ã«é›†åˆã®çŸ¥è­˜ã‚’æ´»ã‹ã™æ—¥ãŒæ¥ã‚‹ã¨ã¯ã€ã€

ã¨ã„ã†ã“ã¨ã§ä»Šå›ã¯é›†åˆã®è¦³ç‚¹ã§ç†è§£ã™ã‚‹ Typescript ã«ã¤ã„ã¦èªã‚Šã¾ã™ã€‚

# 1. å‹ã¯å€¤ã®é›†åˆ

å¤‰æ•°ã«ã¯è‰²ã‚“ãªç¨®é¡ã®å€¤ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã€Typescript ãªã®ã§å‹ã‚’æŒã¡ã¾ã™ã€‚

```ts
const A: number = 42
const B: null = null
const C: undefined = undefined
const D: string = 'Canada'
const E: boolean = true
const F: number[] = [1, 2, 3, 4]
const G: { [k: string]: string} = { name: "name" }
```

é›†åˆçš„ã«è€ƒãˆã‚‹ã¨ã€**å‹ã¯å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã‚‹å€¤ã®é›†åˆ**ã¨ã‚‚ã„ãˆã¾ã™ã€‚ä¾‹ã°ã€ã™ã¹ã¦ã®æ•°å€¤ã®é›†åˆã¯ `number` å‹ã§ã™ã€‚ä¸Šè¨˜ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’é›†åˆã®ãƒ™ãƒ³å›³ã§è¡¨ã—ãŸã‚‰ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

![](https://storage.googleapis.com/zenn-user-upload/109587325181-20240611.png)


æ•°å­—ã® `10` ã¯ `number` å‹ã®è¦ç´ ã§ã€æ–‡å­—åˆ—ã® `â€™10â€™` ã¯ `number` å‹ã®è¦ç´ ã§ã¯ãªã„ã®ã§å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

```ts
const num1: number = 10
const num2: number = '10' // Type 'string' is not assignable to type 'number'
```

Typescript ã®ã‚¨ãƒ©ãƒ¼ã§ã‚ˆãè¦‹ã‚‹ *assignable* ã¨è¨€ã†å˜èªã¯ã€Œå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚ã“ã‚Œã‚’é›†åˆã®è¦³ç‚¹ã§è§£é‡ˆã™ã‚‹ã¨ã€ã€Œã€œã®è¦ç´ ã§ã‚ã‚‹ã€ã‚‚ã—ãã¯ã€Œã€œã®éƒ¨åˆ†é›†åˆã§ã‚ã‚‹ã€ã¨ã„ã†æ„å‘³ã§ã‚‚æ‰ãˆã‚‰ã‚Œã¾ã™ã€‚

# 2. å‹ãƒã‚§ãƒƒã‚¯ã¯éƒ¨åˆ†é›†åˆã‹ã©ã†ã‹ã‚’è¦‹ã‚‹

ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚

```ts
type AB = "A" | "B"
type AB12 = "A" | "B" | 12

const ab: AB = Math.random() < 0.5 ? "A" : "B"

const ab12: AB12 = ab // No Error
```

`AB12` å‹ã®å¤‰æ•°ã« `AB` å‹ã®å€¤ã‚’å‰²ã‚Šå½“ã¦ã¦ã‚‚ã€ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚ç†ç”±ã¯ã€é›†åˆã§è€ƒãˆãŸå ´åˆ `AB` ã¯ `AB12` ã®éƒ¨åˆ†é›†åˆã§ã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/5a4a0920b9a9-20240611.png =150x)
*`AB12` å‹ã¨ `AB` å‹ã®ãƒ™ãƒ³å›³*

ã§ã¯ `AB12` ã®éƒ¨åˆ†é›†åˆã§ã¯ãªã„å‹ã‚’å‰²ã‚Šå½“ã¦ãŸã‚‰ã©ã†ãªã‚‹ã§ã—ã‚‡ã†ï¼Ÿè©¦ã—ã§ã‚³ãƒ¼ãƒ‰ã‚’å°‘ã—ä¿®æ­£ã—ã¦ã¿ã¾ã—ãŸã€‚

```ts
type ABC = "A" | "B" | "C"
type AB12 = "A" | "B" | 12

const abc: ABC = Math.random() < 0.3 ? "A" : Math.random() < 0.7? "B" : "C"

// Type 'ABC' is not assignable to type 'AB12'.
// Type '"C"' is not assignable to type 'AB12'.
const ab12: AB12 = abc // No Error
```

ä»Šå›ã¯ãƒãƒƒãƒãƒªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¦ªåˆ‡ã« `"C"` ãŒã‚ã‚‹ã‹ã‚‰ `AB12` ã«ã¯å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚“ã‚ˆã£ã¦è¨€ã£ã¦ã¾ã™ã­ã€‚


![](https://storage.googleapis.com/zenn-user-upload/2dec74ee454a-20240611.png =170x)
*`AB12` å‹ã¨ `ABC` å‹ã®ãƒ™ãƒ³å›³*

ã¤ã¾ã‚Šã€é›†åˆã®è¦³ç‚¹ã§**å‹ãƒã‚§ãƒƒã‚¯ã¯ã‚ã‚‹é›†åˆãŒåˆ¥ã®é›†åˆã®éƒ¨åˆ†é›†åˆã§ã‚ã‚‹ã‹ã©ã†ã‹ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚‹**ã¨ã„ã†ã“ã¨ã§ã™ã€‚

# 3. å’Œé›†åˆï¼ˆUnionï¼‰

å‹ã¯é›†åˆã ã¨ç†è§£ã§ããŸã®ã§ã€1ç•ªã‚ˆãä½¿ã‚ã‚Œã¦ã‚‹å’Œé›†åˆã®è©±ã‚’ã—ã¾ã—ã‚‡ã†ã€‚

é›†åˆã§ã¯ã€äºŒã¤ã®é›†åˆã‚’ã€Œãã£ã¤ã‘ã€ã¦ä¸€ç·’ã«ã—ã¦ã—ã¾ã†ã“ã¨ã§æ–°ã—ã„é›†åˆã‚’å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã€ãã‚Œã‚’å’Œé›†åˆã¨ã„ã„ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/07aa2813b3c5-20240611.png =170x)
*å’Œé›†åˆï¼ˆImage from [wikipedia](https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88)ï¼‰*

å’Œé›†åˆã¯è‹±èªã§ Union ã§ã™ã€‚Typescript ãƒ¦ãƒ¼ã‚¶ãƒ¼ãªã‚‰ Union ã¯ã™ã§ã«é¦´æŸ“ã¿ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚


```ts
type A = "A"
type B = "B"

type AB = A | B // "A" | "B"
```

`A` ã¯è¦ç´ ãŒæ–‡å­—åˆ— `"A"` ã ã‘ã®é›†åˆã§ã€`B` ã¯è¦ç´ ãŒæ–‡å­—åˆ— `"B"` ã ã‘ã®é›†åˆã§ã™ã€‚ãã®ï¼’ã¤ã®é›†åˆã‚’ãã£ã¤ã‘ã¦å’Œé›†åˆã‚’ä½œã£ãŸã‚‰ã€`"A"` ã¨ `"B"` ã‚’è¦ç´ ã¨ã—ã¦ã‚‚ã¤é›†åˆã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/b366be680c22-20240611.png =200x)
*`A` å‹ã¨ `B` å‹ã®å’Œé›†åˆ*

**ã¡ãªã¿ã«ä¸Šä½é›†åˆã¨éƒ¨åˆ†é›†åˆã®å’Œé›†åˆã¯ä¸Šä½é›†åˆ**ã§ã™ã€‚

```ts
type ABC = "A" | "B" | "C"

type E = ABC | string // string
```

`ABC` ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹å€¤ã¯`"A"`ã€`"B"`ã€`"C"`ã§ã€å…¨éƒ¨æ–‡å­—åˆ—ã§ã™ã€‚è‡ªç„¶ã« `ABC` ã¯ `string` ã®éƒ¨åˆ†é›†åˆã«ãªã‚Šã¾ã™ã€‚ã§ã¯ãã®ï¼’ã¤ã‚’ãã£ã¤ã‘ã¦å’Œé›†åˆã‚’ä½œã£ãŸã‚‰ã€ãã‚Šã‚ƒä¸Šä½é›†åˆã§ã‚ã‚‹ `string` ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

![](https://storage.googleapis.com/zenn-user-upload/250bb451dab7-20240611.png =150x)
*`ABC` å‹ã¨ `string` å‹ã®å’Œé›†åˆã¯ `string`*

é›†åˆã®è¦³ç‚¹ã§è€ƒãˆã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãª Typescript ã®å‹•ä½œã‚‚ç†è§£ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

```ts
type T = "A" | 10 | true

type S = T | string // string | 10 | true  
type N = T | number // number | "A" | 10  
type B = T | boolean // boolean | "A" | 10  
```

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒ™ãƒ³å›³ã«è¡¨ã—ã¦ã¿ã¾ã—ãŸã€‚ãƒ™ãƒ³å›³ã¿ã¦å’Œé›†åˆä½œã£ã¦ã¿ãŸã‚‰ã€é›£ã—ããªã„ã§ã—ã‚‡ã†ï¼

![](https://storage.googleapis.com/zenn-user-upload/938b3d66197d-20240611.png)
*å·¦ã‹ã‚‰ `S`ã€`N`ã€`B` å‹ã®ãƒ™ãƒ³å›³*

# 4. å…±é€šéƒ¨åˆ†ï¼ˆIntersectionï¼‰

å’Œé›†åˆã«ã¤ã„ã¦èª¬æ˜ã—ãŸã®ã§ã€å…±é€šéƒ¨åˆ†ã«ã¤ã„ã§ã‚‚èª¬æ˜ã—ã¾ã™ã€‚

äºŒã¤ã®é›†åˆã®å…±é€šã—ãŸéƒ¨åˆ†ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã§ã€æ–°ã—ã„é›†åˆã‚’å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã€ãã‚Œã‚’å…±é€šéƒ¨åˆ†ã¨ã„ã„ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/8b1d694b8071-20240611.png =170x)
*å…±é€šéƒ¨åˆ†ï¼ˆImage from [wikipedia](https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88)ï¼‰*

å…±é€šéƒ¨åˆ†ã¯è‹±èªã§ Intersection ã§ã™ã€‚Intersection ã‚‚é¦´æŸ“ã¿ã‚ã‚‹æ–¹å¤šã„ã¨æ€ã„ã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```ts
type ABC = "A" | "B" | "C"
type CDE = "C" | "D" | "E"

type C = ABC & CDE // "C"
```

`ABC` ã¯ `"A"`ã€`"B"`ã€`"C"` ã‚’è¦ç´ ã¨ã—ã¦æŒã¤é›†åˆã§ã€`CDE` ã¯ `"C"`ã€`"D"`ã€`"E"` ã‚’è¦ç´ ã¨ã—ã¦æŒã¤é›†åˆã§ã™ã€‚ãã®ï¼’ã¤ã®é›†åˆã‹ã‚‰å…±é€šã—ãŸéƒ¨åˆ†ã‚’è¦‹ã¤ã‘ã‚‹ã¨ã€`"C"` ã‚’è¦ç´ ã¨ã—ã¦ã‚‚ã¤é›†åˆã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/4aa6a89c1fd3-20240611.png =170x)
*`ABC`ã€€å‹ã¨ã€€`ABC`ã€€å‹ã®ãƒ™ãƒ³å›³*


ã¾ãŸã€**ä¸Šä½é›†åˆã¨éƒ¨åˆ†é›†åˆã®å…±é€šéƒ¨åˆ†ã¯éƒ¨åˆ†é›†åˆ**ã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ã§è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚


```ts
type ABC = "A" | "B" | "C"

type E = ABC & string // "A" | "B" | "C"
```

å’Œé›†åˆã®ã¨ãã«è¦‹ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ã‚³ãƒ¼ãƒ‰ã§ã€`ABC` ã¯ `string` ã®éƒ¨åˆ†é›†åˆã§ã™ã€‚ãã®ï¼’ã¤ã‹ã‚‰å…±é€šã—ãŸéƒ¨åˆ†ã‚’è¦‹ã¤ã‘ã‚‹ã¨ã€ãã‚Šã‚ƒéƒ¨åˆ†é›†åˆã§ã‚ã‚‹ `ABC` ãã®ã‚‚ã®ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

![](https://storage.googleapis.com/zenn-user-upload/3c166edbce2d-20240611.png =170x)
*`ABC` å‹ã¨ `string` å‹ã®éƒ¨åˆ†é›†åˆã¯ `ABC`*

å’Œé›†åˆã®èª¬æ˜ã§è¦‹ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’éƒ¨åˆ†é›†åˆã«å·®ã—æ›¿ãˆã¦ã¿ã¦ã‚‚ã€é›†åˆã®ãƒ™ãƒ³å›³ã‚’è€ƒãˆãŸã‚‰å…±é€šéƒ¨åˆ†ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã¯é›£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚

```ts
type T = "A" | 10 | true

type S = T & string // "A"
type N = T & number // 10
type B = T & boolean // true
```

ãƒ™ãƒ³å›³ã§è€ƒãˆãŸã‚‰ç°¡å˜ã§ã—ã‚‡ã†ï¼Ÿ

![](https://storage.googleapis.com/zenn-user-upload/938b3d66197d-20240611.png)
*å·¦ã‹ã‚‰ `S`ã€`N`ã€`B` å‹ã®ãƒ™ãƒ³å›³*


# 3. `never`ã€`unknown`ã€`any`

æ¬¡ã¯ã¡ã‚‡ã£ã¨ç‰¹åˆ¥ãªé›†åˆã§ã‚ã‚‹ `never`ã€`unknown`ã€`any` ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚


## `never` ã¯ç©ºé›†åˆ

**`never` ã¯ç©ºé›†åˆ**ãªã®ã§ã€ãªã«ã‚‚å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

```ts
let unknownValue: unknown
let anyValue: any

const A: never = 100 // Type 'number' is not assignable to type 'never'
const B: never = '100' // Type 'string' is not assignable to type 'never'
const B: never = '100' // Type 'string' is not assignable to type 'never'
const C: never = true // Type 'boolean' is not assignable to type 'never'
const D: never = null // Type 'null' is not assignable to type 'never'.
const E: never = undefined // Type 'undefined' is not assignable to type 'never'.
const F: never = unknownValue // Type 'unknown' is not assignable to type 'never'.
const G: never = anyValue // Type 'any' is not assignable to type 'never'.
```

ç©ºé›†åˆã¨ã‹è¦ã‚‹ã®ã‹ï¼Ÿã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€æ•°å­—ã®ä¸–ç•Œã§ã‚¼ãƒ­ãŒç„¡ã®é‡ã‚’è¡¨ã™ã‚ˆã†ã«ã€**å‹ã®ä¸–ç•Œã§ã‚‚ä¸å¯èƒ½ã‚’è¡¨ã™å‹ã¯å¿…è¦**ã§ã™ã€‚

ä¾‹ãˆã° `string` ã¨ `number` ã®å…±é€šéƒ¨åˆ†ã‚’è¦‹ã¤ã‘ã‚ˆã†ã¨ã—ãŸã‚‰ã€ç©ºé›†åˆã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚`never` å‹ãŒå­˜åœ¨ã™ã‚‹ãŠã‹ã’ã§ã€ãã‚ŒãŒè¡¨ç¾ã§ã¾ã™ã€‚

```ts
type T = string & number // never
```


## `unknown` ã¯ã™ã¹ã¦ã®é›†åˆã®ä¸Šä½é›†åˆ

**`unknown` ã¯1ç•ªå¤§ãã„é›†åˆ**ã§ã€ã©ã†ã„ã†å‹ã‚‚å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```ts
const A: unknown = 100
const B: unknown = '100'
const C: unknown = true
const D: unknown = null
const E: unknown = undefined
const F: unknown = [100]
const G: unknown = { a: "a" }
const H: unknown = () => {}
```

![](https://storage.googleapis.com/zenn-user-upload/064fa0e1574b-20240611.png)
*ãƒ™ãƒ³å›³ã§è¡¨ã™ã¨ã“ã‚“ãªæ„Ÿã˜*

ãªã‚“ã‹ã€ã€`unknown`ã£ã¦`any`ã¨ä¼¼ã¦ã‚‹ã‚ˆã†ãªï¼Ÿæ°—ãŒã™ã‚‹ï¼Ÿã€ã€ã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å®Ÿã¯`unknown`ã¨`any`ã«ã¯å¤§ããªé•ã„ãŒã‚ã‚Šã¾ã™ã€‚


## `any` ã¯ã™ã¹ã¦ã®é›†åˆã®ä¸Šä½é›†åˆã§ã‚ã‚Šã€éƒ¨åˆ†é›†åˆã§ã‚‚ã‚ã‚‹

å¤§äº‹ãªã“ã¨ãªã®ã§ï¼’å›ã„ã„ã¾ã™ã€‚**`any` ã¯ã™ã¹ã¦ã®é›†åˆã®ä¸Šä½é›†åˆã§ã‚ã‚Šã€éƒ¨åˆ†é›†åˆã§ã‚‚ã‚ã‚Šã¾ã™**ã€‚

ã©ã†ã„ã†ã“ã¨ï¼Ÿï¼Ÿï¼Ÿã£ã¦æ„Ÿã˜ã§ã™ã‘ã©ã€ã‚³ãƒ¼ãƒ‰ã§è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

`unknown`ã¨åŒã˜ãã€`any`å‹ã«ã¯ã©ã†ã„ã†å‹ã‚‚å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```ts
const A: any = 100
const B: any = '100'
const C: any = true
const D: any = null
const E: any = undefined
const F: any = [100]
const G: any = { a: "a" }
const H: any = () => {}
```

ã“ã‚ŒãŒã€Œã™ã¹ã¦ã®é›†åˆã®ä¸Šä½é›†åˆã§ã‚ã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/a6309f683cd0-20240611.png)
*ãƒ™ãƒ³å›³ã§è¡¨ã™ã¨ã“ã‚“ãªæ„Ÿã˜*

ãŸã ã€(`never` ä»¥å¤–ã®)ã™ã¹ã¦ã®å‹ã« `any` ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨**ã‚‚**ã§ãã¾ã™ã€‚

```ts
let anyValue: any

const A: number = anyValue
const B: string = anyValue
const C: boolean = anyValue
const D: null = anyValue
const E: undefined = anyValue
const F: string[] = anyValue
const G: Record<string,string> = anyValue
const H: () => void = anyValue
```

ã“ã‚ŒãŒ(`never` ä»¥å¤–ã®)ã™ã¹ã¦ã®é›†åˆã®éƒ¨åˆ†é›†åˆã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã“ã‚ŒãŒã€Œéƒ¨åˆ†é›†åˆã§ã‚ã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/70c1cac91b01-20240611.png)
*ãƒ™ãƒ³å›³ã§è¡¨ã™ã¨ã€ã€ã€ã“ã‚“ãªæ„Ÿã˜ã€ã€ã€*

ã‚ã‘ã‚ã‹ã‚“ãªã„ã§ã™ã­ã€‚ã ã‹ã‚‰ `any` ã¯ Typescript ä¸–ç•Œè¦³ã®ç ´å£Šè€…ãªã‚“ã§ã™ã‚ˆã€‚

### è£œè¶³1) `unknown` ã¯éƒ¨åˆ†é›†åˆã«ãªã‚Œãªã„

`unknown` ã¯1ç•ªå¤§ãã„é›†åˆãªã®ã§ã€ä»–ã®é›†åˆã®éƒ¨åˆ†é›†åˆã«ã¯ãªã‚Œã¾ã›ã‚“ã€‚

```ts
let unknownValue: unknown

const A: number = unknownValue // Type 'unknown' is not assignable to type 'number'
const B: string = unknownValue // Type 'unknown' is not assignable to type 'string'
const C: boolean = unknownValue // Type 'unknown' is not assignable to type 'boolean'
const D: null = unknownValue // Type 'unknown' is not assignable to type 'null'
const E: undefined = unknownValue // Type 'unknown' is not assignable to type 'undefined'
const F: string[] = unknownValue // Type 'unknown' is not assignable to type 'string[]'
const G: Record<string,string> = unknownValue // Type 'unknown' is not assignable to type 'Record<string, string>'
const H: () => void = unknownValue // Type 'unknown' is not assignable to type '() => void'
```

ãŸã  `any` ã®éƒ¨åˆ†é›†åˆã«ã¯ãªã‚Œã‚‹ï¼ˆ`any` ã¯ç ´å£Šè€…ã ã‹ã‚‰ã€ã€ã€€ï¼‰

```ts
let unknownValue: unknown
const A: any = unknownValue
```

### è£œè¶³2) `any` ã¨ `unknown` ã£ã¦å…·ä½“çš„ã«ã©ã†é•ã†ï¼Ÿ

#### `any` - ä½•ã§ã‚‚ã‚ã‚Šãªã‚“ã§å‹ãƒã‚§ãƒƒã‚¯ãªã‚“ã‹è¦ã‚‰ã‚“

ä»¥ä¸‹ã®ã‚ˆã†ãªé–¢æ•°ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚`toUpperCase`ã¯ `string` å‹ã«ã ã‘å­˜åœ¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãªã®ã§ã€value ãŒ `string` å‹ã˜ã‚ƒãªã„å ´åˆç¢ºå®Ÿã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã‘ã©ã€`value` ã®å‹ã‚’ `any` ã«ã™ã‚‹ã¨ã€Typescript ã¯ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ã¦ãã‚Œã¾ã›ã‚“ã€‚

```ts
const toUpperCase = (value: any) => {
    return value.toUpperCase() // NoError
}
```

ã“ã®ã‚ˆã†ã« **`any` ã¯å‹ãƒã‚§ãƒƒã‚¯ã‚’æ”¾æ£„ã—ã¾ã™ã€‚ä½¿ã‚ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚**

#### `unknown` - ä½•ã®å‹ãŒæ¥ã‚‹ã‹ã‚ã‹ã‚‰ã‚“ã‹ã‚‰ã€ã¡ã‚ƒã‚“ã¨å‹ç¢ºèªã—ã‚ã‚ˆ

åŒã˜é–¢æ•°ã§ã‚‚`value` ã®å‹ã‚’ `unknown` ã«ã—ãŸã‚‰ã€ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ã¦ãã‚Œã¾ã™ã€‚ã“ã‚Œã¯å‹ãŒä½•ãªã®ã‹ã‚ã‹ã‚‰ãªã„ã®ã«ã€`string` å‹ã«ã ã‘å­˜åœ¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ä½¿ã£ãŸã‚‰å±ãªã„ã‚ˆï¼ã¨æ•™ãˆã¦ãã‚Œã¦ã‚‹ã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã€‚

```ts
const toUpperCase = (value: unknown) => {
    return value.toUpperCase() // 'value' is of type 'unknown'
}
```

å‹ã‚¬ãƒ¼ãƒ‰ã§å‹ã‚’ `string` ã«çµã£ãŸã‚‰ç„¡äº‹ã‚¨ãƒ©ãƒ¼è§£æ¶ˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```ts
const toUpperCase = (value: unknown) => {
    if (typeof value !== "string") return
    return value.toUpperCase() // NoError
}
```

ã©ã†ã„ã†å‹ãŒæ¥ã‚‹ã‹ã‚ã‹ã‚‰ãªã„æ™‚ã¯ã ã„ãŸã„ `unknown` ã§è§£æ±ºã§ãã¾ã™ã€‚

# 4. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å…±é€šéƒ¨åˆ†

ä»Šã¾ã§å’Œé›†åˆã¨å…±é€šéƒ¨åˆ†ã«ã¤ã„ã¦è©±ã—ã¾ã—ãŸãŒã€ã“ã‚ŒãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã«ãªã‚‹ã¨æ€ã£ãŸã“ã¨ã¨é•ã†å‹•ãã«è¦‹ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã‚Œã‚’ã˜ã£ãã‚Šè§£èª¬ã—ã¦ã„ãã¾ã™ã€‚

ã¾ãšå…±é€šéƒ¨åˆ†ã€Intersection ã‹ã‚‰è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```ts
interface Person {
    name: string
}
interface LifeSpan {
    birth: Date
    death?: Date
}

// { name: string; birth: Date; death?: Date }
type PersonSpan = Person & LifeSpan
```

å…±é€šéƒ¨åˆ†ãªã®ã«ã€ãªã‚“ã‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å¢—ãˆã¦ã‚‹?ã£ã¦æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚å…ˆè¦‹ãŸãƒ¦ãƒ‹ã‚ªãƒ³åŒå£«ã® Intersection ã¯å€¤ãŒæ¸›ã£ã¦ãŸã®ã§ã€ãªãœã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯å…±é€šéƒ¨åˆ†ã‚’ä½œã£ãŸã‚‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå¢—ãˆã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ã“ã®åŸç†ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«ã¯ã€**Typescript ã¯ Duck Typing ã«åŸºã¥ã„ã¦ã‚‹ã“ã¨ã‚’ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™**ã€‚ãã®è©±ã¯ä»¥å‰åˆ¥è¨˜äº‹ã§æ‰±ã£ãŸã“ã¨ãŒã‚ã‚‹ã®ã§ã€ã”å‚è€ƒãŠé¡˜ã„ã—ã¾ã™ã€‚

https://zenn.dev/luvmini511/articles/2cd39b6cffa08c

Typescript ã®å…¬å¼ã‚µã‚¤ãƒˆã§ã‚‚è©³ã—ãè§£èª¬ã—ã¦ã„ã¾ã™ã®ã§ãœã²èª­ã‚“ã§ã¿ã¦ãã ã•ã„ã€‚
https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html#structural-type-system

Duck Typing è¦³ç‚¹ã§è€ƒãˆã‚‹ã¨ã€`Person` ã¯ `name: string` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚‚ã¤(ã™ã¹ã¦ã®)ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é›†åˆã§ã€`LifeSpan` ã¯ `birth: Date` ã¨ `death?: Date` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚‚ã¤(ã™ã¹ã¦ã®)ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é›†åˆã§ã™ã€‚

ãã®ï¼’ã¤ã®å…±é€šéƒ¨åˆ†ã‚’è¦‹ã¤ã‘ã‚ˆã†ã¨ã™ã‚‹ã¨ï¼Ÿ

![](https://storage.googleapis.com/zenn-user-upload/a1014e0dded8-20240611.png =600x)
*`Person` ã¨ `LifeSpan` ã®å…±é€šéƒ¨åˆ†*

**å…±é€šéƒ¨åˆ†ã¨ã„ã†ã‚‚ã®ã¯ã€ï¼’ã¤ã®é›†åˆä¸¡æ–¹ã®éƒ¨åˆ†é›†åˆã§ã‚ã‚‹**å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®è€ƒãˆæ–¹ã‚’Duck Typingã«å½“ã¦ã¯ã‚ã‚‹ã¨ã€ï¼’ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã™ã¹ã¦æŒã¤å‹ãŒå…±é€šéƒ¨åˆ†ã¨ãªã‚Šã¾ã™ã€‚


# 5. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å’Œé›†åˆ

ã§ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å’Œé›†åˆã€Union ã¯ã©ã†ã§ã—ã‚‡ã†ã‹ã€‚ã¾ãšä»¥ä¸‹ã®ã‚ˆã†ãªå‹ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚

```ts
interface OrderMade {
    size: string
    orderDate: Date
}
interface ReadyMade {
    size: string
    store: string
}

type Product = OrderMade | ReadyMade
```

ãã—ã¦ `Product` å‹ã®å€¤ã‚’å¼•æ•°ã§å—ã‘å–ã‚‹é–¢æ•°ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚

![](https://storage.googleapis.com/zenn-user-upload/68b1c301cfaa-20240611.png =500x)

`product` ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ã—ãŸã‚‰ã€`size` ã ã‘è£œå®Œã§å‡ºã¦ãã‚‹ã“ã¨ãŒä¸æ€è­°ã§ã™ã­ã€‚Union ã¯å’Œé›†åˆã€ç¯„å›²ãŒåºƒããªã£ãŸã¯ãšãªã®ã«ãªãœã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯æ¸›ã£ã¦ã‚‹ã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ã“ã“ã§å’Œé›†åˆã®å®šç¾©ã‚’ã‚‚ã†ä¸€åº¦ç¢ºèªã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/07aa2813b3c5-20240611.png =170x)
*å’Œé›†åˆï¼ˆImage from [wikipedia](https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88)ï¼‰*

å’Œé›†åˆã¨ã„ã†ã“ã¨ã¯ã€å…±é€šéƒ¨åˆ†ã¨é•ã£ã¦å¿…ãšä¸¡æ–¹ã®é›†åˆã®éƒ¨åˆ†é›†åˆã§ã‚ã‚‹ä¿è¨¼ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¤ã¾ã‚Šã€**ç‰‡æ–¹ã ã‘ã®éƒ¨åˆ†é›†åˆã§ã‚ã‚‹å¯èƒ½æ€§ãŒå­˜åœ¨**ã—ã¾ã™ã€‚

ãã‚Œã‚’è¸ã¾ãˆã¦ã€`product` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ã—ã¦ã‚‹ã¨ãã® Typescript ã®æ°—æŒã¡ã‚’ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚

![](https://storage.googleapis.com/zenn-user-upload/68b1c301cfaa-20240611.png =500x)

Typescript ã¯æ€ã„ã¾ã™ã€‚ã€Œã“ã®æ™‚ç‚¹ã ã¨ `product` ã®å‹ãŒ `OrderMade` ã®ã»ã†ãªã®ã‹ `ReadyMade` ã®ã»ã†ãªã®ã‹ã‚ã‹ã‚‰ãªã„ã€ã€ãªã‚‰**å…±é€šã—ã¦ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã ã‘ã‚¢ã‚¯ã‚»ã‚¹ã•ã›ãŸã»ã†ãŒå®‰å…¨**ã ï¼ã€

ã¨ã„ã†ã“ã¨ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å’Œé›†åˆã§ã¯ã€å…±é€šãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã ã‘ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã¾ã™ã€‚

ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«ã¯ã€å‹ã‚¬ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™ã€‚

```ts
const doSomething = (product: Product) => {
    if ('store' in product) {
        console.log(product.store) // No Error
    }
}
```

ã§ã‚‚ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã”ã¨ã«å‹ã‚¬ãƒ¼ãƒ‰ã™ã‚‹ã®ã¯ã ã„ã¶ã‚ã‚“ã©ãã•ã„ã®ã§ã€**ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® Union å‹ã‚’ä½¿ã†å ´åˆã¯åˆ¤åˆ¥å¯èƒ½ãªãƒ¦ãƒ‹ã‚ªãƒ³å‹ã®ã»ã†ãŒä¾¿åˆ©**ã§ã™ã€‚

åˆ¤åˆ¥å¯èƒ½ãªãƒ¦ãƒ‹ã‚ªãƒ³ãŒä½•ã‹ã¨ã„ã†ã¨ã€å‹ã‚’åˆ¤åˆ¥ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® Union å‹ã§ã™ã€‚è¨€è‘‰ã ã‘ã ã¨é›£ã—ã„ã®ã§ã€ã‚³ãƒ¼ãƒ‰ã§è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```ts
interface OrderMade {
    type: "orderMade" // å‹ã‚’åˆ¤åˆ¥ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    size: string
    orderDate: Date
}
interface ReadyMade {
    type: "readyMade" // å‹ã‚’åˆ¤åˆ¥ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    size: string
    store: string
}

type Product = OrderMade | ReadyMade

const doSomething = (product: Product) => {
    if (product.type === "orderMade") {
        console.log(product.orderDate) // ã“ã®ã‚¹ã‚³ãƒ¼ãƒ—ã§ã® product ã¯ OrderMade å‹
    }
    if (product.type === "readyMade") {
        console.log(product.store) // ã“ã®ã‚¹ã‚³ãƒ¼ãƒ—ã§ã® product ã¯ ReadyMade å‹
    }
}
```

ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã”ã¨ã«å‹ã‚¬ãƒ¼ãƒ‰ã™ã‚‹ã‚ˆã‚Šã€ã“ã£ã¡ã®ã»ã†ãŒã‚‚ã£ã¨ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã­ã€‚

ã“ã®ã‚ˆã†ã«ã€Œå‹ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¦ãƒ‹ã‚ªãƒ³ã€ã‚’ **Discriminated Union**ã€ã¾ãŸã¯ **Tagged Union** ã¨ã„ã„ã¾ã™ã€‚



# ğŸŒ· çµ‚ã‚ã‚Šã€€

ã“ã‚Œã§çš†ã•ã‚“ã® Typescript ã¸ã®ç†è§£ãŒæ·±ã¾ã£ãŸã‚‰å¬‰ã—ã„ã§ã™ã€‚

ã“ã®è¨˜äº‹ã¯ä»¥å‰[å‹‰å¼·ä¼šã§ç™ºè¡¨ã—ãŸè³‡æ–™](https://speakerdeck.com/gardensky511/ji-he-teli-jie-suru-typescript)ã‚’è¨˜äº‹åŒ–ã—ãŸã‚‚ã®ã§ã™ã€‚ãƒ™ãƒ³å›³æãã®ã‚ã‚“ã©ãã•ã‹ã£ãŸã§ã™ç¬‘



