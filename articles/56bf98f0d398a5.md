---
title: "package-lock.jsonã¨yarn.lockã®å­˜åœ¨ç†ç”±"
emoji: "ðŸ™Œ"
type: "tech"
topics:
  - "npm"
  - "yarn"
  - "frontend"
published: true
published_at: "2020-12-12 20:38"
---

## å§‹ã‚
ä»¥å‰ä¸€äººã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ãŸæ™‚ã«åˆ¥ã«è¦ã‚‰ãªã„ã¨æ€ã£ã¦package-lock.jsonã‚’å‰Šé™¤ã—ãŸã“ã¨ã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—æœ€è¿‘ãã‚ŒãŒã¨ã‚“ã§ã‚‚ãªãæã‚ã—ã„ã“ã¨ã ã£ãŸã¨æ°—ã¥ãã¾ã—ãŸã€‚ã¨ã„ã†ã“ã¨ã§ã€æŠ•ç¨¿ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚

## 1. package-lock.jsonã€yarn.lock
### 1-1. æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜éŒ²
npmã‚„yarnã‚’ä½¿ã†ã¨ã€ä½œæˆã—ãŸè¦šãˆãŒãªã„ã®ã«ã„ã¤ã®é–“ã«ã‹package-lock.jsonåˆã¯yarn.lockã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã£ã¦ã¾ã—ãŸã€‚åˆ¥ã«è§¦ã‚‹ã“ã¨ãŒãªã„ã‹ã‚‰æ°—ã«ã—ã¦ãªã‹ã£ãŸã—ã€å‰Šé™¤ã—ãŸã“ã¨ã™ã‚‰ã‚ã‚Šã¾ã™ã€‚ã“ã®å­ãŸã¡ã¯ä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ï¼Ÿ

package-lock.jsonã¨yarn.lockã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä¾å­˜ã—ã¦ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®**æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³**ã‚’è¨˜éŒ²ã—ã¦ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚npmãªã‚‰package-lock.jsonã€yarnãªã‚‰yarn.lockã«ãªã‚‹ã ã‘ã§ã‚„ã£ã¦ã‚‹ã“ã¨ã¯åŒã˜ã§ã™ã€‚

### 1-2. ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```javascript
// package-lock.jsonã®ä¾‹
 "dependencies": {
   "@babel/code-frame": {
     "version": "7.8.3",
     "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.8.3.tgz",
     "integrity": "sha512-a9gxpmdXtZEInkCSHUJDLHZVBgb1QS0jhss4cPP93EW7s+uC5bikET2twEF3KV+7rDblJcmNvTR7VJejqd2C2g==",
     "requires": {
       "@babel/highlight": "^7.8.3"
     }
   },
}
```

```javascript
// yarn.lockã®ä¾‹
"@babel/code-frame@7.8.3", "@babel/code-frame@^7.0.0", "@babel/code-frame@^7.8.3":
  version "7.8.3"
  resolved "https://registry.yarnpkg.com/@babel/code-frame/-/code-frame-7.8.3.tgz#33e25903d7481181534e12ec0a25f16b6fcf419e"
  integrity sha512-a9gxpmdXtZEInkCSHUJDLHZVBgb1QS0jhss4cPP93EW7s+uC5bikET2twEF3KV+7rDblJcmNvTR7VJejqd2C2g==
  dependencies:
    "@babel/highlight" "^7.8.3"
```

ã“ã‚Œã§lockãƒ•ã‚¡ã‚¤ãƒ«ãŒä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹ã¯ã‚ã‹ã‚Šã¾ã—ãŸã€‚ã“ã“ã§ã€Œpackage.jsonã«ã‚‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±æ›¸ã„ã¦ã‚ã‚‹ã—ãã‚Œã§ã„ã„ã‚“ã˜ã‚ƒãªã„ï¼Ÿã€ã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒ*(ç§ã¯æ€ã„ã¾ã—ãŸ)*ã€ã‚ˆããªã„ã¨ã„ã†ã“ã¨ã‚’èª¬æ˜Žã—ã¦ã„ãã¾ã™ã€‚

## 2. package.json


### 2-1. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¯„å›²ã‚’è¨˜éŒ²


ã¾ãšç§ãŒèª²é¡Œã§ã‚„ã£ã¦ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®package.jsonã®ä¸€éƒ¨ã‚’æŒã£ã¦ãã¾ã—ãŸã€‚
```javascript
{
  "name": "my-app",
  "version": "0.1.0",
  "dependencies": {
    "react": "^16.14.0",
    "react-dom": "^16.14.0",
    "typescript": "~3.7.2"
  }
}
```

ã‚ˆãè¦‹ãŸã‚‰ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å‰ã«^ã‚„~ãªã©ã®è¨˜å·ãŒã¤ã„ã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã™ã€‚ã“ã‚Œã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¯„å›²ã‚’è¡¨ã™è¨˜å·ã§ã™ã€‚ã¤ã¾ã‚Šã€package.jsonã«ã¯æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ãªãã€**ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¯„å›²(version range)ã‚’è¨˜éŒ²ã—ã¦ã‚‹**ã¨ã„ã†ã“ã¨ã§ã™ã€‚

ã“ã®è¨˜å·ã«ã¤ã„ã¦ã‚‚ç°¡å˜ã«ç´¹ä»‹ã—ãŸã„ã§ã™ã€‚ãŒã€ã›ã£ã‹ããªã®ã§ã¾ãšã¯ãã®å‰ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡¨è¨˜æ³•ã«ã¤ã„ã¦ã‚‚è©±ã—ã¾ã™ã€‚

### 2-2. SemVer
SemVerã¯Semantic Versioningã€æ–‡å­—é€šã‚Šæ„å‘³ã®ã‚ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡¨è¨˜æ³•ã§ã™ã€‚
- **[MAJOR , MINOR, PATCH]**
 1. MAJOR : å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨äº’æ›ç”ŸãŒãªã„APIã®å¤‰æ›´ã®æ™‚ã«å¢—åŠ 
 2. MINORï¼šå‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨äº’æ›æ€§ãŒã‚ã‚Šã¤ã¤æ©Ÿèƒ½ã®å¤‰æ›´ã€è¿½åŠ ã®æ™‚ã«å¢—åŠ 
 3. PATCHï¼šãƒãƒ¼ã‚°ä¿®æ­£ã®æ™‚ã«å¢—åŠ 

ã¨ã„ã†åŽŸå‰‡ã«å¾“ã£ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨è¨˜ã—ã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°`16.14.0`ã¨ã„ã†ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã‚‰ã€16ãŒMAJORã€14ãŒMINORã€0ãŒPATCHã®éƒ¨åˆ†ã§ã—ã‚‡ã†ã€‚

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ•°å­—ã®æ„å‘³ãŒã‚ã‹ã‚Šã¾ã—ãŸã®ã§ã€ã“ã®ã¾ã¾ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¯„å›²ã®è¨˜å·ã«ã¤ã„ã¦èª¬æ˜Žã—ã¾ã™ã€‚


### 2-3. ãƒãƒ«ãƒ€è¡¨è¨˜ ( ~ )
MINORãŒæ˜Žè¨˜ã•ã‚Œã¦ã„ã‚‹ãªã‚‰PATCHã®æ›´æ–°ã‚’è¨±å®¹ã€ãã†ã§ã¯ãªã„å ´åˆã¯MINORã®å¤‰æ›´ã‚’è¨±å®¹
- ~1.2.3 : MINORãŒæ˜Žè¨˜ã•ã‚Œã¦ã‚‹ã‹ã‚‰PATCHã®æ›´æ–°è¨±å®¹(1.2.3ä»¥ä¸Š1.3.0æœªæº€)
- ~1 : MINORãŒæ˜Žè¨˜ã•ã‚Œã¦ãªã„ã‹ã‚‰MINORã®æ›´æ–°è¨±å®¹(1.0.0ä»¥ä¸Š2.0.0æœªæº€)



### 2-4. ã‚­ãƒ£ãƒ¬ãƒƒãƒˆè¡¨è¨˜ ( ^ )
ä¸€ç•ªå·¦å´ã«ã‚ã‚‹ã€ã‚¼ãƒ­ã§ãªã„ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¯å¤‰ãˆãªã„ (ãã‚Œä»¥ä¸‹ãŒã‚ãŒã‚‹ã“ã¨ã¯è¨±å®¹)

- ^1.2.3ï¼šä¸€ç•ªå·¦å´ã«ã‚ã‚‹ã€ã‚¼ãƒ­ã§ãªã„è¦ç´ ãŒMAJORã ã‹ã‚‰MINORã€PATCHã®æ›´æ–°å¯èƒ½(1.2.3ä»¥ä¸Š2.0.0æœªæº€)
- ^0.2.3ï¼šä¸€ç•ªå·¦å´ã«ã‚ã‚‹ã€ã‚¼ãƒ­ã§ãªã„è¦ç´ ã¯MINORã ã‹ã‚‰PATCHã®æ›´æ–°å¯èƒ½(0.2.3ä»¥ä¸Š0.3.0æœªæº€)
- ^0.0.3ï¼šä¸€ç•ªå·¦å´ã«ã‚ã‚‹ã€ã‚¼ãƒ­ã§ãªã„è¦ç´ ã¯PATCHã ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä¸å¯èƒ½



## 3. package.jsonã ã‘ã ã£ãŸã‚‰ï¼Ÿ

### 3-1. å•é¡Œ

package.jsonã«ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¯„å›²ãŒè¨˜éŒ²ã•ã‚Œã¦ã‚‹ã“ã¨ã«ã¤ã„ã¦è©±ã—ã¾ã—ãŸã€‚ã“ã‚Œã®ä½•ãŒã¾ãšã„ã‹ã¨ã„ã†ã¨ã€**ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ç‚¹ã«ã‚ˆã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒé•ããªã‚‹**ã“ã¨ã§ã™ã€‚

ä¾‹ãˆã°ã€ã‚ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®package.jsonã«`"react": "^16.8.2"`ã¨æ›¸ã„ã¦ã‚ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã¯ä¸Šã§ã¿ãŸã‚ˆã†ã«`16.8.2`ä»¥ä¸Š`17.0.0`ã®ç¯„å›²ã‚’è¡¨ã—ã¾ã™ã€‚ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢Aã¯ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®reactã‚’ä½¿ã£ã¦é–‹ç™ºã‚’ã—ã¦ã„ã¾ã™ã€‚ã‚ã‚‹ç¨‹åº¦æ™‚é–“ãŒçµŒã£ã¦ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢BãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆæµã€`npm i`ãŸ`yarn`ã‚³ãƒžãƒ³ãƒ‰ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ãŒã€ãã®æ™‚ç‚¹ã§ã¯`react`ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ`16.8.7`ã«ä¸ŠãŒã£ã¦ã¦ãã‚ŒãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚ã¾ãŸçµæ§‹æ™‚é–“ãŒçµŒã£ã¦ãƒãƒ¼ãƒ ã«å…¥ã£ãŸã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢CãŒã€å½“æ™‚`react`ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®`16.9.2`ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚


- ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢Aï¼š`16.8.2`ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®`react`ã§é–‹ç™º
- ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢Bï¼š`16.8.7`ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®`react`ã§é–‹ç™º
- ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢Cï¼š`16.9.2`ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®`react`ã§é–‹ç™º

ã“ã†ã—ã¦åŒã˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢åŒå£«ã§ã‚‚é•ã†ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã—ã¾ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã“ã®ã¾ã¾ã ã£ãŸã‚‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢CãŒå®Ÿè£…ã—ãŸæ©Ÿèƒ½ãŒä»–ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®PCã®ã§ã¯å‹•ã‹ãªã‹ã£ãŸã‚Šã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢Aã®PCã§ã¯é€šã‚‹ãƒ†ã‚¹ãƒˆãŒä»–ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®PCã§ã¯é€šã‚‰ãªã‹ã£ãŸã‚Šã®å¤§å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚


### 3-2. è§£æ±º

ä¸Šè¨˜ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«package-lock.jsonã¨yarn.lockãŒå­˜åœ¨ã—ã¾ã™(é•·ã„ã®ã§ã¾ã¨ã‚ã¦lockãƒ•ã‚¡ã‚¤ãƒ«ã¨å‘¼ã³ã¾ã™)ã€‚lockãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã¨ã€`npm i`ã‚„`yarn`ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã‚‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã«lockãƒ•ã‚¡ã‚¤ãƒ«ã«æ˜Žè¨˜ã•ã‚Œã¦ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã®ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ç‚¹é–¢ä¿‚ç„¡ã—ã§ã„ã¤ã‚‚åŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã§ãã¾ã™ã€‚

ã“ã®lockãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®gitãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ãŠã„ãŸã‚‰ã€ä»–ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‚ãã‚Œã‚’å…±æœ‰ã—ã¦ã‚‚ã‚‰ãˆã¾ã™ã€‚ã“ã†ã—ã¦ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼åŒå£«ã«åŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæŒã¦ã‚‹ã‚ˆã†ã«ãªã‚‹ãªã‚Šã¾ã—ãŸã€‚


## çµ‚ã‚ã‚Š

ã¨ã„ã†ã“ã¨ã§ã€1äººé–‹ç™ºãªã‚‰é–¢ä¿‚ãªã„ã‘ã©ãƒãƒ¼ãƒ é–‹ç™ºãªã‚‰lockãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤§äº‹ã«ã™ã‚‹ã¹ãã ã¨ã„ã†ã“ã¨ã‚’å­¦ã³ã¾ã—ãŸã€‚ã‚ã‹ã‚Šã‚„ã™ãã‹ã‘ãŸã‹æ—¥æœ¬èªžé–“é•ã£ã¦ãªã„ã‹æ€ªã—ã„ã§ã™ãŒã€èª­ã‚“ã§ãã ã•ã£ã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™(>_<)ã€‚